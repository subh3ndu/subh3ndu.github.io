<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang xml:lang>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>TmpyazYlknr1b</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <style type="text/css">:root {--c-caption: grey;--c-blue: #26bfe3;--c-green: #02e180;--c-orange: #f2971a;--c-pink: #e3266f;--c-bg: #fff;--c-bg-alt: #f5f5f5;--c-text-header: #fff;--c-text-body: #95989a;--padding: 20px;--padding-inv: calc(-1 * var(--padding));--fonts: "Open Sans", -apple-system, system-ui, "Segoe UI", "Roboto","Helvetica Neue", Arial, sans-serif;--font-size: 1.1rem;}html {font-size: 100%;}body {color: #444;font-family: var(--fonts);font-size: var(--font-size);line-height: 1.7;padding: 1em;margin: auto;max-width: 800px;background: #fefefe;}a {color: #0645ad;text-decoration: none;}a:visited {color: #0b0080;}a:hover {color: #06e;}a:active {color: #faa700;}a:focus {outline: thin dotted;}a::selection {background: rgba(255, 255, 0, 0.3);color: #0645ad;}*::selection {background: rgba(255, 255, 0, 0.3);color: #000;}p {margin: 1em 0;}.caption {text-align: center;color: var(--c-caption);font-style: italic;}.note,.tips,.warning {display: block;width: calc(100% - var(--padding) * 2);padding: 0 var(--padding);padding-bottom: var(--padding);background-color: var(--c-bg-alt);}.note:before,.tips:before,.warning:before {display: block;margin: 0 var(--padding-inv) 10px var(--padding-inv);padding-left: var(--padding);font-style: bold;color: white;}.note:before {content: "Note";background-color: var(--c-blue);}.tips:before {content: "Tips";background-color: var(--c-pink);}.warning:before {content: "Warning";background-color: var(--c-orange);}img {max-width: 100%;}h1,h2,h3,h4,h5,h6 {color: #111;line-height: 125%;margin-top: 2em;font-weight: normal;}h4,h5,h6 {font-weight: bold;}h1 {font-size: 2.5em;}h2 {font-size: 2em;}h3 {font-size: 1.5em;}h4 {font-size: 1.2em;}blockquote {color: #666666;margin: 0;padding-left: 3em;border-left: 0.5em #eee solid;}hr {display: block;height: 2px;border: 0;border-top: 1px solid #aaa;border-bottom: 1px solid #eee;margin: 1em 0;padding: 0;}pre,code,kbd,samp {color: #0084b8;font-family: monospace, monospace;}pre {background-color: #f9f9f9;padding: 1em;font-size: 14px;white-space: pre-wrap;word-wrap: break-word;}code {white-space: pre-wrap;}b,strong {font-weight: bold;}dfn {font-style: italic;color: var(--c-blue);}ins {background: #ff9;color: #000;text-decoration: none;}ul,ol {margin: 1em 0;padding: 0 0 0 2em;}li p:last-child {margin-bottom: 0;}ul ul,ol ol {margin: 0.3em 0;}dl {margin-bottom: 1em;}dt {font-weight: bold;margin-bottom: 0.8em;}dd {margin: 0 0 0.8em 2em;}dd:last-child {margin-bottom: 0;}img {border: 0;-ms-interpolation-mode: bicubic;vertical-align: middle;}figure {display: block;text-align: center;margin: 1em 0;}figure img {border: none;margin: 0 auto;}figcaption {font-size: 0.8em;font-style: italic;margin: 0 0 0.8em;}.author {font-size: 1.2em;text-align: center;}tag {min-width: 3.2em;text-align: center;border-radius: 8px;padding: 0 4px;margin-bottom: 0;margin-top: 4px;margin-right: 0.2em;display: inline-block;color: white;}tag.update {background: var(--c-blue);}tag.new {background: var(--c-green);}tag.update:after {content: "update";}tag.new:after {content: "new";}button {background-color: var(--c-blue);color: white;border: none;cursor: pointer;line-height: 2rem;font-size: 1.2rem;margin: 0.75rem 0;overflow: visible;padding: 0.75rem 1.5rem;border-radius: 1rem;transition: background-color $transition-duration;white-space: nowrap;}</style>
</head>
<body>
<h1 id="coding-the-inventory-slots">Coding the inventory slots</h1>
<p>In this lesson, we’ll code the interactive inventory slots, with the ability to click an item to grab it and move it around.</p>
<p>We can repeat what we did with <code>DragPreview</code> with these inventory slots and give them a property that references the current item and make sure it’s a child node of the panel. The code should look familiar. But on top of that, we can put the user interaction code there to collect, split and merge item stacks.</p>
<p>By the end of the lesson, we’ll have something that looks like the following, with the inventory slots working, but their look a bit off.</p>
<p>We’ll address the visuals in the next lesson.</p>
<p><img src="data:image/png;base64,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" /></p>
<h2 id="the-inventory-panel">The inventory panel</h2>
<p>I’ve called the individual inventory slots <code>InventoryPanel</code> in this game, as they rely on the <code>Panel</code> node.</p>
<p>For this demo, I decided to design the slots in Factorio’s style, a game I love. The controls work like so:</p>
<ul>
<li>Left-click grabs or puts the full stack to or from the panel.</li>
<li>Right-click splits stacks, either putting half of what the mouse is holding into a slot or grabbing half of a stack from a slot.</li>
<li>Trying to put an item onto a slot that already has an item swaps it with the one you’re holding.</li>
</ul>
<p>That’s what we’ll code in this section.</p>
<p>Open <code>InventoryPanel.tscn</code> and attach a script to the root node, <code>InventoryPanel.gd</code>. We’ll start by defining some values, mainly the <code>held_item</code>, the <code>BlueprintEntity</code> held by this node, and the <code>gui</code>, a reference to the parent <code>GUI</code> node, which will give us access to the mouse’s inventory.</p>
<p>Whenever you code a drag-and-drop system, you need to pass references around nodes. Here, we’ve chosen to have the mouse’s inventory in the <code>GUI</code> node because it’s our gateway between the user interface and the game world. And we’ll need the ability to drag objects from the inventory to the world.</p>
<p><em>Note that the <code>Control</code> type has built-in drag-and-drop support, but it only works between control nodes, not to and from the game world. It also only supports holding down the mouse button and dragging. We want to toggle holding an item. That’s why we’re coding a custom system here.</em></p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#75715e">## Represents a slot that can hold an item. </span>
<span style="color:#75715e">## We keep track of the held item and its stack size by adding it as a child of the inventory slot.</span>
class_name InventoryPanel
<span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Panel</span>

<span style="color:#75715e">## We emit this signal whenever the item on this panel changes. We&#39;ll bubble it up</span>
<span style="color:#75715e">## to the GUI node so it can make other systems react to inventory changes.</span>
<span style="color:#75715e">## The `panel` argument below is this node.</span>
<span style="color:#66d9ef">signal</span> held_item_changed(panel, item)

<span style="color:#75715e">## A reference to the entity currently held by the panel. It can be `null` if there is none.</span>
<span style="color:#66d9ef">var</span> held_item: BlueprintEntity <span style="color:#66d9ef">setget</span> _set_held_item

<span style="color:#75715e">## We&#39;ll store a reference to the main GUI node to access the mouse&#39;s inventory.</span>
<span style="color:#66d9ef">var</span> gui: <span style="color:#a6e22e">Control</span>

<span style="color:#75715e">## We&#39;ll keep track of the stack size using the label.</span>
<span style="color:#66d9ef">onready</span> <span style="color:#66d9ef">var</span> count_label :<span style="color:#f92672">=</span> <span style="color:#f92672">$</span><span style="color:#a6e22e">Label</span>
</pre>
<p>We’ll need to set the <code>gui</code> variable from another node. To do so, we define a <code>setup()</code> method we’ll call from another script.</p>
<p>Below, we also define our <code>held_item</code> variable’s setter, which triggers an update to the <code>Label</code> node.</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#75715e">## Store a reference to the GUI so we can access the mouse&#39;s inventory.</span>
<span style="color:#66d9ef">func</span> setup(_gui: <span style="color:#a6e22e">Control</span>) <span style="color:#f92672">-&gt;</span> void:
    gui <span style="color:#f92672">=</span> _gui


<span style="color:#75715e">## Sets the panel&#39;s currently held item, notifies anyone connected of it, and</span>
<span style="color:#75715e">## updates the stack counter.</span>
<span style="color:#66d9ef">func</span> _set_held_item(value: BlueprintEntity) <span style="color:#f92672">-&gt;</span> void:
    <span style="color:#75715e"># If we already have an item, remove it. Holding a reference to the old object</span>
    <span style="color:#75715e"># is the responsibility of whoever is changing it.</span>
    <span style="color:#75715e"># </span>
    <span style="color:#75715e"># In other places in the GUI we&#39;ve used `if blueprint` or `if held_item`,</span>
    <span style="color:#75715e"># and it worked fine. But entities may free the held item on the inventory panel.</span>
    <span style="color:#75715e"># As of Godot 3.2.4, freed objects are not necessarily false, so we use</span>
    <span style="color:#75715e"># `is_instance_valid()` for the sake of safety and prevent crashes.</span>
    <span style="color:#66d9ef">if</span> is_instance_valid(held_item) <span style="color:#f92672">and</span> held_item<span style="color:#f92672">.</span>get_parent() <span style="color:#f92672">==</span> self:
        remove_child(held_item)

    held_item <span style="color:#f92672">=</span> value

    <span style="color:#75715e"># If the `held_item` is not `null`, add it as a child and make sure that it appears </span>
    <span style="color:#75715e"># behind the label.</span>
    <span style="color:#66d9ef">if</span> is_instance_valid(held_item):
        add_child(held_item)
        move_child(held_item, <span style="color:#ae81ff">0</span>)

    <span style="color:#75715e"># We update the stack count label.</span>
    _update_label()
    <span style="color:#75715e"># And we notify any subscribers that we&#39;ve changed what item is in this panel.</span>
    emit_signal(<span style="color:#e6db74">&quot;held_item_changed&quot;</span>, self, held_item)


<span style="color:#75715e">## Updates the label with the stack&#39;s current amount. If it&#39;s only 1 or there is</span>
<span style="color:#75715e">## no item, we hide the label.</span>
<span style="color:#66d9ef">func</span> _update_label() <span style="color:#f92672">-&gt;</span> void:
    <span style="color:#66d9ef">var</span> can_be_stacked :<span style="color:#f92672">=</span> is_instance_valid(held_item) <span style="color:#f92672">and</span> held_item<span style="color:#f92672">.</span>stack_count <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span>

    <span style="color:#66d9ef">if</span> can_be_stacked:
        count_label<span style="color:#f92672">.</span>text <span style="color:#f92672">=</span> str(held_item<span style="color:#f92672">.</span>stack_count)
        count_label<span style="color:#f92672">.</span>show()
    <span style="color:#66d9ef">else</span>:
        count_label<span style="color:#f92672">.</span>text <span style="color:#f92672">=</span> str(<span style="color:#ae81ff">1</span>)
        count_label<span style="color:#f92672">.</span>hide()
</pre>
<p>The biggest function in our script will be the <code>Control._gui_input()</code> callback, which we use to handle all possible cases when clicking a slot. This callback gets called after <code>_input()</code> and only receives events that affect this control node, like clicks within the bounding box of this <code>InventoryPanel</code>.</p>
<p>Note that it relies on some functions we have yet to define. We’ll add them after it.</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#66d9ef">func</span> _gui_input(event: <span style="color:#a6e22e">InputEvent</span>) <span style="color:#f92672">-&gt;</span> void:
    <span style="color:#75715e"># We need to check for left and right click actions below.</span>
    <span style="color:#75715e"># To help with code readability, I create two variables with short descriptive names.</span>
    <span style="color:#66d9ef">var</span> left_click :<span style="color:#f92672">=</span> event<span style="color:#f92672">.</span>is_action_pressed(<span style="color:#e6db74">&quot;left_click&quot;</span>)
    <span style="color:#66d9ef">var</span> right_click :<span style="color:#f92672">=</span> event<span style="color:#f92672">.</span>is_action_pressed(<span style="color:#e6db74">&quot;right_click&quot;</span>)

    <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> (left_click <span style="color:#f92672">or</span> right_click):
        <span style="color:#66d9ef">return</span>

    <span style="color:#75715e"># We have three main cases to handle below:</span>
    <span style="color:#75715e">#</span>
    <span style="color:#75715e"># 1. The mouse is holding an item and the inventory slot has an item.</span>
    <span style="color:#75715e"># 2. The mouse is holding an item and the inventory slot is empty.</span>
    <span style="color:#75715e"># 3. The mouse is not holding an item and the inventory has one.</span>

    <span style="color:#75715e"># If the player clicked on the panel and the mouse is holding an item.</span>
    <span style="color:#66d9ef">if</span> gui<span style="color:#f92672">.</span>blueprint:
        <span style="color:#75715e"># We first get the held item&#39;s name to compare it to the slot&#39;s item.</span>
        <span style="color:#75715e"># We&#39;ll use it to stack items if they&#39;re of the same type.</span>
        <span style="color:#66d9ef">var</span> blueprint_name :<span style="color:#f92672">=</span> Library<span style="color:#f92672">.</span>get_entity_name_from(gui<span style="color:#f92672">.</span>blueprint)

        <span style="color:#75715e"># The `held_item` variable tells us if this inventory panel contains an item.</span>
        <span style="color:#66d9ef">if</span> is_instance_valid(held_item):
            <span style="color:#75715e"># If so, we get its name and compare it to the mouse&#39;s `blueprint_name`.</span>
            <span style="color:#66d9ef">var</span> held_item_name :<span style="color:#f92672">=</span> Library<span style="color:#f92672">.</span>get_entity_name_from(held_item)
            <span style="color:#66d9ef">var</span> item_is_same_type: <span style="color:#a6e22e">bool</span> <span style="color:#f92672">=</span> held_item_name <span style="color:#f92672">==</span> blueprint_name

            <span style="color:#75715e"># We then check if this panel&#39;s held item stack isn&#39;t full.</span>
            <span style="color:#66d9ef">var</span> stack_has_space: <span style="color:#a6e22e">bool</span> <span style="color:#f92672">=</span> held_item<span style="color:#f92672">.</span>stack_count <span style="color:#f92672">&lt;</span> held_item<span style="color:#f92672">.</span>stack_size
            <span style="color:#66d9ef">if</span> item_is_same_type <span style="color:#f92672">and</span> stack_has_space:
                <span style="color:#75715e"># If the player left-clicked, we merge the mouse&#39;s entire stack with this one.</span>
                <span style="color:#66d9ef">if</span> left_click:
                    _stack_items()
                <span style="color:#75715e"># With a right-click, we merge half of the mouse&#39;s stack with this one.</span>
                <span style="color:#66d9ef">elif</span> right_click:
                    _stack_items(true)
            <span style="color:#75715e"># If the items are not the same name or there is no space, we swap the two items,</span>
            <span style="color:#75715e"># putting the panel&#39;s in the mouse and the mouse&#39;s in the panel.</span>
            <span style="color:#66d9ef">else</span>:
                <span style="color:#66d9ef">if</span> left_click:
                    _swap_items()
        <span style="color:#75715e"># If this inventory slot is empty,</span>
        <span style="color:#66d9ef">else</span>:
            <span style="color:#75715e"># if the player left-clicks on the slot, we put the item in the slot (the </span>
            <span style="color:#75715e"># inventory panel grabs the item from the mouse&#39;s inventory).</span>
            <span style="color:#66d9ef">if</span> left_click:
                _grab_item()

            <span style="color:#75715e"># if the player right-clicks, we either put half the mouse&#39;s stack in the slot</span>
            <span style="color:#75715e"># or put the mouse&#39;s item in the slot if it can&#39;t stack.</span>
            <span style="color:#66d9ef">elif</span> right_click:
                <span style="color:#66d9ef">if</span> gui<span style="color:#f92672">.</span>blueprint<span style="color:#f92672">.</span>stack_count <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span>:
                    _grab_split_items()
                <span style="color:#66d9ef">else</span>:
                    _grab_item()
    <span style="color:#75715e"># If the mouse isn&#39;t holding any item but there is an item in the slot.</span>
    <span style="color:#66d9ef">elif</span> is_instance_valid(held_item):
        <span style="color:#75715e"># On left-click, we put the slot&#39;s item in the mouse&#39;s inventory.</span>
        <span style="color:#66d9ef">if</span> left_click:
            _release_item()
        <span style="color:#75715e"># On right-click, we either put the item in the mouse&#39;s inventory or split the stack.</span>
        <span style="color:#66d9ef">elif</span> right_click:
            <span style="color:#66d9ef">if</span> held_item<span style="color:#f92672">.</span>stack_count <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>:
                _release_item()
            <span style="color:#66d9ef">else</span>:
                _split_items()
</pre>
<p>We then define the methods triggered by our inputs. Note we’ve named them from this slot’s standpoint. For example, <code>_grab_item()</code> grabs an item from the mouse’s inventory, and <code>_release_item()</code> releases the item held in this slot.</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#75715e">## Gets an item from the mouse and stores it in the `held_item` variable.</span>
<span style="color:#66d9ef">func</span> _stack_items(split :<span style="color:#f92672">=</span> false) <span style="color:#f92672">-&gt;</span> void:
    <span style="color:#75715e"># We first calculate the smaller number between half the mouse&#39;s stack and the amount of space </span>
    <span style="color:#75715e"># left on the current stack. We don&#39;t want to go over or grab more than the mouse has,</span>
    <span style="color:#75715e"># which is why we pick the smaller number.</span>
    <span style="color:#66d9ef">var</span> count :<span style="color:#f92672">=</span> <span style="color:#a6e22e">int</span>(
        min(
            gui<span style="color:#f92672">.</span>blueprint<span style="color:#f92672">.</span>stack_count <span style="color:#f92672">/</span> (<span style="color:#ae81ff">2</span> <span style="color:#66d9ef">if</span> split <span style="color:#66d9ef">else</span> <span style="color:#ae81ff">1</span>),
            held_item<span style="color:#f92672">.</span>stack_size <span style="color:#f92672">-</span> held_item<span style="color:#f92672">.</span>stack_count
        )
    )

    <span style="color:#75715e"># If we are splitting the mouse&#39;s stack, we reduce its `stack_count` by `count` and update</span>
    <span style="color:#75715e"># its label.</span>
    <span style="color:#66d9ef">if</span> split:
        gui<span style="color:#f92672">.</span>blueprint<span style="color:#f92672">.</span>stack_count <span style="color:#f92672">-=</span> count
        gui<span style="color:#f92672">.</span>update_label()
    <span style="color:#66d9ef">else</span>:
        <span style="color:#75715e"># If we are grabbing as much of the stack as possible, we reduce it by `count`</span>
        <span style="color:#75715e"># in case we don&#39;t have enough space for all of it.</span>
        <span style="color:#66d9ef">if</span> count <span style="color:#f92672">&lt;</span> gui<span style="color:#f92672">.</span>blueprint<span style="color:#f92672">.</span>stack_count:
            gui<span style="color:#f92672">.</span>blueprint<span style="color:#f92672">.</span>stack_count <span style="color:#f92672">-=</span> count
            gui<span style="color:#f92672">.</span>update_label()
        <span style="color:#66d9ef">else</span>:
            <span style="color:#75715e"># Or if the stack is reduced to zero, we destroy it and remove it from the mouse.</span>
            gui<span style="color:#f92672">.</span>destroy_blueprint()

    <span style="color:#75715e"># Finally, we increase the held item&#39;s stack count by the calculated `count` and update</span>
    <span style="color:#75715e"># the label.</span>
    held_item<span style="color:#f92672">.</span>stack_count <span style="color:#f92672">+=</span> count
    _update_label()


<span style="color:#75715e">## Takes the current held item&#39;s stack and swaps it with the mouse&#39;s.</span>
<span style="color:#66d9ef">func</span> _swap_items() <span style="color:#f92672">-&gt;</span> void:
    <span style="color:#66d9ef">var</span> item: BlueprintEntity <span style="color:#f92672">=</span> gui<span style="color:#f92672">.</span>blueprint
    <span style="color:#75715e"># We set the mouse&#39;s blueprint to null here. This calls its setter and ensures</span>
    <span style="color:#75715e"># that the blueprint is removed from the scene tree, making it available </span>
    <span style="color:#75715e"># for the panel to add as a child.</span>
    gui<span style="color:#f92672">.</span>blueprint <span style="color:#f92672">=</span> null

    <span style="color:#75715e"># We store the current item temporarily in a variable. We&#39;re about to change</span>
    <span style="color:#75715e"># what `held_item` points to, but to complete our swap, we need to give this `current_item` </span>
    <span style="color:#75715e"># to the mouse&#39;s inventory.</span>
    <span style="color:#66d9ef">var</span> current_item :<span style="color:#f92672">=</span> held_item
    
    <span style="color:#75715e"># We then swap the two items, first adding the mouse&#39;s item to this inventory slot. </span>
    <span style="color:#75715e"># Note the use of `self`. This ensures we call the setter as calling the property </span>
    <span style="color:#75715e"># directly from the instance does not call the setter.</span>
    self<span style="color:#f92672">.</span>held_item <span style="color:#f92672">=</span> item
    gui<span style="color:#f92672">.</span>blueprint <span style="color:#f92672">=</span> current_item


<span style="color:#75715e">## Grabs the item from the mouse and puts it into the panel&#39;s inventory.</span>
<span style="color:#66d9ef">func</span> _grab_item() <span style="color:#f92672">-&gt;</span> void:
    <span style="color:#66d9ef">var</span> item: BlueprintEntity <span style="color:#f92672">=</span> gui<span style="color:#f92672">.</span>blueprint
    
    <span style="color:#75715e"># We make sure the blueprint has been released from the mouse so we can grab it.</span>
    gui<span style="color:#f92672">.</span>blueprint <span style="color:#f92672">=</span> null
    self<span style="color:#f92672">.</span>held_item <span style="color:#f92672">=</span> item


<span style="color:#75715e">## Releases the item from the panel and puts it into the mouse&#39;s inventory.</span>
<span style="color:#66d9ef">func</span> _release_item() <span style="color:#f92672">-&gt;</span> void:
    <span style="color:#66d9ef">var</span> item :<span style="color:#f92672">=</span> held_item
    
    <span style="color:#75715e"># We make sure the blueprint has been released from the panel so the mouse</span>
    <span style="color:#75715e"># can grab it.</span>
    self<span style="color:#f92672">.</span>held_item <span style="color:#f92672">=</span> null
    gui<span style="color:#f92672">.</span>blueprint <span style="color:#f92672">=</span> item


<span style="color:#75715e">## Splits the current panel&#39;s inventory&#39;s stack and gives half to the mouse&#39;s inventory.</span>
<span style="color:#66d9ef">func</span> _split_items() <span style="color:#f92672">-&gt;</span> void:
    <span style="color:#75715e"># We calculate half of the current stack.</span>
    <span style="color:#66d9ef">var</span> count :<span style="color:#f92672">=</span> <span style="color:#a6e22e">int</span>(held_item<span style="color:#f92672">.</span>stack_count <span style="color:#f92672">/</span> <span style="color:#ae81ff">2.0</span>)

    <span style="color:#75715e"># We then create a brand new `BlueprintEntity` and set its stack size to what we&#39;ve calculated.</span>
    <span style="color:#75715e"># We also reduce the current one by that amount.</span>
    <span style="color:#66d9ef">var</span> new_stack :<span style="color:#f92672">=</span> held_item<span style="color:#f92672">.</span>duplicate()
    new_stack<span style="color:#f92672">.</span>stack_count <span style="color:#f92672">=</span> count
    held_item<span style="color:#f92672">.</span>stack_count <span style="color:#f92672">-=</span> count

    <span style="color:#75715e"># Finally, we give the mouse the new stack and update the label.</span>
    gui<span style="color:#f92672">.</span>blueprint <span style="color:#f92672">=</span> new_stack
    _update_label()


<span style="color:#75715e">## Splits the mouse&#39;s inventory stack and takes half of it into this item slot.</span>
<span style="color:#75715e">## The logic is similar to `_split_items()` above, but reversed as we take the</span>
<span style="color:#75715e">## item from the mouse this time.</span>
<span style="color:#66d9ef">func</span> _grab_split_items() <span style="color:#f92672">-&gt;</span> void:
    <span style="color:#66d9ef">var</span> count :<span style="color:#f92672">=</span> <span style="color:#a6e22e">int</span>(gui<span style="color:#f92672">.</span>blueprint<span style="color:#f92672">.</span>stack_count <span style="color:#f92672">/</span> <span style="color:#ae81ff">2.0</span>)

    <span style="color:#66d9ef">var</span> new_stack: BlueprintEntity <span style="color:#f92672">=</span> gui<span style="color:#f92672">.</span>blueprint<span style="color:#f92672">.</span>duplicate()
    new_stack<span style="color:#f92672">.</span>stack_count <span style="color:#f92672">=</span> count
    
    gui<span style="color:#f92672">.</span>blueprint<span style="color:#f92672">.</span>stack_count <span style="color:#f92672">-=</span> count
    gui<span style="color:#f92672">.</span>update_label()
    
    self<span style="color:#f92672">.</span>held_item <span style="color:#f92672">=</span> new_stack
</pre>
<p>The most important aspect of the methods we defined is being careful with the numbers. We don’t want to introduce bugs where we either take too many items or increase the total count when splitting stacks. The code above takes care of some edge cases, like how we calculate the <code>count</code> in <code>_stack_items()</code>.</p>
<p>Notice how we tightly couple the <code>gui</code> node with this one. With such a drag-and-drop system, the objects are interdependent, so I decided to embrace that dependency. Using signals to coordinate passing an item from one slot to the mouse would make the code much harder to follow, mostly due to the stack system and the calculations we have to do to make it work.</p>
<h2 id="connecting-everything">Connecting everything</h2>
<p>We still need to forward the GUI node to the inventory panels, so open <code>InventoryWindow.tscn</code> and attach a new <code>InventoryWindow.gd</code> script to the root node.</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">MarginContainer</span>

<span style="color:#75715e">## We use this signal to notify the GUI system that the inventory has changed.</span>
<span style="color:#66d9ef">signal</span> inventory_changed(panel, held_item)

<span style="color:#75715e">## The main GUI node so we can use it to transmit messages and function calls.</span>
<span style="color:#66d9ef">var</span> gui: <span style="color:#a6e22e">Control</span>

<span style="color:#75715e">## Get the control that holds the inventory bars. We get this node because we can</span>
<span style="color:#75715e">## assign the quick-bar to it later.</span>
<span style="color:#66d9ef">onready</span> <span style="color:#66d9ef">var</span> inventory_path :<span style="color:#f92672">=</span> <span style="color:#f92672">$</span><span style="color:#a6e22e">PanelContainer</span><span style="color:#f92672">/</span><span style="color:#a6e22e">MarginContainer</span><span style="color:#f92672">/</span>Inventories

<span style="color:#75715e">## We get each of the inventory bars in an array so we can iterate over them.</span>
<span style="color:#66d9ef">onready</span> <span style="color:#66d9ef">var</span> inventories :<span style="color:#f92672">=</span> inventory_path<span style="color:#f92672">.</span>get_children()


<span style="color:#75715e">## Here, we define the missing `setup()` function we called from `GUI.gd` in the previous lesson.</span>
<span style="color:#75715e">## It forwards the setup call to the inventory bars, so they can setup their panels.</span>
<span style="color:#66d9ef">func</span> setup(_gui: <span style="color:#a6e22e">Control</span>) <span style="color:#f92672">-&gt;</span> void:
    gui <span style="color:#f92672">=</span> _gui
    <span style="color:#66d9ef">for</span> bar <span style="color:#f92672">in</span> inventories:
        bar<span style="color:#f92672">.</span>setup(gui)


<span style="color:#75715e">## Whenever we receive the `inventory_changed` signal, bubble up the signal from the inventory bars.</span>
<span style="color:#66d9ef">func</span> _on_InventoryBar_inventory_changed(panel, held_item) <span style="color:#f92672">-&gt;</span> void:
    emit_signal(<span style="color:#e6db74">&quot;inventory_changed&quot;</span>, panel, held_item)

</pre>
<p>As you can see, it calls for a <code>setup()</code> inside of <code>InventoryBar.gd</code> as well. Open <code>InventoryBar.gd</code> and add the following code.</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#75715e"># Emitted whenever a panel&#39;s item changed.</span>
<span style="color:#66d9ef">signal</span> inventory_changed(panel, held_item)

<span style="color:#75715e">## Sets up each of the inventory panels and connects to their `held_item_changed` signal.</span>
<span style="color:#66d9ef">func</span> setup(gui: <span style="color:#a6e22e">Control</span>) <span style="color:#f92672">-&gt;</span> void:
    <span style="color:#75715e"># For each panel we&#39;ve created in `_ready()`, we forward the reference to the GUI node </span>
    <span style="color:#75715e"># and connect to their signal.</span>
    <span style="color:#66d9ef">for</span> panel <span style="color:#f92672">in</span> panels:
        panel<span style="color:#f92672">.</span>setup(gui)
        panel<span style="color:#f92672">.</span>connect(<span style="color:#e6db74">&quot;held_item_changed&quot;</span>, self, <span style="color:#e6db74">&quot;_on_Panel_held_item_changed&quot;</span>)


<span style="color:#75715e">## Bubbles up the signal from the inventory bar up to the inventory window.</span>
<span style="color:#66d9ef">func</span> _on_Panel_held_item_changed(panel: <span style="color:#a6e22e">Control</span>, held_item: BlueprintEntity) <span style="color:#f92672">-&gt;</span> void:
    emit_signal(<span style="color:#e6db74">&quot;inventory_changed&quot;</span>, panel, held_item)
</pre>
<p>In <code>InventoryWindow.tscn</code>, use the <em>Node</em> tab to connect the <code>Inventory1</code>, <code>Inventory2</code>, and <code>Inventory3</code> instances of <code>InventoryBar.tscn</code> to <code>InventoryWindow</code>’s <code>_on_InventoryBar_inventory_changed()</code> function.</p>
<p>When using the signal connection popup, be careful to set the <em>Receiver Method</em> to <code>_on_InventoryBar_inventory_changed</code>.</p>
<p><img src="data:image/png;base64,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" /></p>
<p>This is going to be preliminary work towards crafting and detecting what recipes are available to the player.</p>
<p><img src="data:image/png;base64,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" /></p>
<p>Your node tree should look like this.</p>
<p><img src="data:image/png;base64,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" /></p>
<h2 id="testing-the-inventory-system">Testing the inventory system</h2>
<p>Now, we can write some test code to make sure everything works as expected.</p>
<p>We don’t yet have any way to pick up items, but we can use some code to assign items.</p>
<p>Open <code>InventoryWindow.gd</code>, and at the end of <code>setup()</code>, you can add a few lines of code to create a new stack of engines and batteries and assign them. We can remove this code later, once we implemented item pickup.</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#66d9ef">func</span> setup(_gui: <span style="color:#a6e22e">Control</span>) <span style="color:#f92672">-&gt;</span> void:
    <span style="color:#75715e">#...</span>
        
    <span style="color:#66d9ef">var</span> engine: BlueprintEntity <span style="color:#f92672">=</span> Library<span style="color:#f92672">.</span>blueprints<span style="color:#f92672">.</span>StirlingEngine<span style="color:#f92672">.</span>instance()
    engine<span style="color:#f92672">.</span>stack_count <span style="color:#f92672">=</span> <span style="color:#ae81ff">4</span>
    <span style="color:#66d9ef">var</span> battery: BlueprintEntity <span style="color:#f92672">=</span> Library<span style="color:#f92672">.</span>blueprints<span style="color:#f92672">.</span>Battery<span style="color:#f92672">.</span>instance()
    battery<span style="color:#f92672">.</span>stack_count <span style="color:#f92672">=</span> <span style="color:#ae81ff">4</span>
    inventories[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>panels[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>held_item <span style="color:#f92672">=</span> engine
    inventories[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>panels[<span style="color:#ae81ff">1</span>]<span style="color:#f92672">.</span>held_item <span style="color:#f92672">=</span> battery
</pre>
<p>Now, if you run the game, you should get the following.</p>
<p><img src="data:image/png;base64,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" /></p>
<p>It doesn’t look right, but it is working! You can click on items to pick them up, split them with right-click, re-stack them, move them from item to item, swap them, so on and so forth, and the numbers stay up to date.</p>
<p>We’re getting closer. We need to fix that size and position issue and then connect them to the <code>EntityPlacer</code>.</p>
<h2 id="code-reference">Code reference</h2>
<p>Here’s the code reference for this lesson.</p>
<p><code>InventoryPanel.gd</code></p>
<pre style="color:#f8f8f2;background-color:#272822">class_name InventoryPanel
<span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Panel</span>

<span style="color:#66d9ef">signal</span> held_item_changed(panel, item)

<span style="color:#66d9ef">var</span> held_item: BlueprintEntity <span style="color:#66d9ef">setget</span> _set_held_item

<span style="color:#66d9ef">var</span> gui: <span style="color:#a6e22e">Control</span>

<span style="color:#66d9ef">onready</span> <span style="color:#66d9ef">var</span> count_label :<span style="color:#f92672">=</span> <span style="color:#f92672">$</span><span style="color:#a6e22e">Label</span>


<span style="color:#66d9ef">func</span> _gui_input(event: <span style="color:#a6e22e">InputEvent</span>) <span style="color:#f92672">-&gt;</span> void:
    <span style="color:#66d9ef">var</span> left_click :<span style="color:#f92672">=</span> event<span style="color:#f92672">.</span>is_action_pressed(<span style="color:#e6db74">&quot;left_click&quot;</span>)
    <span style="color:#66d9ef">var</span> right_click :<span style="color:#f92672">=</span> event<span style="color:#f92672">.</span>is_action_pressed(<span style="color:#e6db74">&quot;right_click&quot;</span>)

    <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> (left_click <span style="color:#f92672">or</span> right_click):
        <span style="color:#66d9ef">return</span>

    <span style="color:#66d9ef">if</span> gui<span style="color:#f92672">.</span>blueprint:
        <span style="color:#66d9ef">var</span> blueprint_name :<span style="color:#f92672">=</span> Library<span style="color:#f92672">.</span>get_entity_name_from(gui<span style="color:#f92672">.</span>blueprint)

        <span style="color:#66d9ef">if</span> is_instance_valid(held_item):
            <span style="color:#66d9ef">var</span> held_item_name :<span style="color:#f92672">=</span> Library<span style="color:#f92672">.</span>get_entity_name_from(held_item)
            <span style="color:#66d9ef">var</span> item_is_same_type: <span style="color:#a6e22e">bool</span> <span style="color:#f92672">=</span> held_item_name <span style="color:#f92672">==</span> blueprint_name

            <span style="color:#66d9ef">var</span> stack_has_space: <span style="color:#a6e22e">bool</span> <span style="color:#f92672">=</span> held_item<span style="color:#f92672">.</span>stack_count <span style="color:#f92672">&lt;</span> held_item<span style="color:#f92672">.</span>stack_size
            <span style="color:#66d9ef">if</span> item_is_same_type <span style="color:#f92672">and</span> stack_has_space:
                <span style="color:#66d9ef">if</span> left_click:
                    _stack_items()
                <span style="color:#66d9ef">elif</span> right_click:
                    _stack_items(true)
            <span style="color:#66d9ef">else</span>:
                <span style="color:#66d9ef">if</span> left_click:
                    _swap_items()
        <span style="color:#66d9ef">else</span>:
            <span style="color:#66d9ef">if</span> left_click:
                _grab_item()

            <span style="color:#66d9ef">elif</span> right_click:
                <span style="color:#66d9ef">if</span> gui<span style="color:#f92672">.</span>blueprint<span style="color:#f92672">.</span>stack_count <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span>:
                    _grab_split_items()
                <span style="color:#66d9ef">else</span>:
                    _grab_item()
    <span style="color:#66d9ef">elif</span> is_instance_valid(held_item):
        <span style="color:#66d9ef">if</span> left_click:
            _release_item()
        <span style="color:#66d9ef">elif</span> right_click:
            <span style="color:#66d9ef">if</span> held_item<span style="color:#f92672">.</span>stack_count <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>:
                _release_item()
            <span style="color:#66d9ef">else</span>:
                _split_items()


<span style="color:#66d9ef">func</span> setup(_gui: <span style="color:#a6e22e">Control</span>) <span style="color:#f92672">-&gt;</span> void:
    gui <span style="color:#f92672">=</span> _gui


<span style="color:#66d9ef">func</span> _set_held_item(value: BlueprintEntity) <span style="color:#f92672">-&gt;</span> void:
    <span style="color:#66d9ef">if</span> is_instance_valid(held_item) <span style="color:#f92672">and</span> held_item<span style="color:#f92672">.</span>get_parent() <span style="color:#f92672">==</span> self:
        remove_child(held_item)

    held_item <span style="color:#f92672">=</span> value

    <span style="color:#66d9ef">if</span> is_instance_valid(held_item):
        add_child(held_item)
        move_child(held_item, <span style="color:#ae81ff">0</span>)

    _update_label()
    emit_signal(<span style="color:#e6db74">&quot;held_item_changed&quot;</span>, self, held_item)


<span style="color:#66d9ef">func</span> _update_label() <span style="color:#f92672">-&gt;</span> void:
    <span style="color:#66d9ef">var</span> can_be_stacked :<span style="color:#f92672">=</span> is_instance_valid(held_item) <span style="color:#f92672">and</span> held_item<span style="color:#f92672">.</span>stack_count <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span>

    <span style="color:#66d9ef">if</span> can_be_stacked:
        count_label<span style="color:#f92672">.</span>text <span style="color:#f92672">=</span> str(held_item<span style="color:#f92672">.</span>stack_count)
        count_label<span style="color:#f92672">.</span>show()
    <span style="color:#66d9ef">else</span>:
        count_label<span style="color:#f92672">.</span>text <span style="color:#f92672">=</span> str(<span style="color:#ae81ff">1</span>)
        count_label<span style="color:#f92672">.</span>hide()


<span style="color:#66d9ef">func</span> _stack_items(split :<span style="color:#f92672">=</span> false) <span style="color:#f92672">-&gt;</span> void:
    <span style="color:#66d9ef">var</span> count :<span style="color:#f92672">=</span> <span style="color:#a6e22e">int</span>(
        min(
            gui<span style="color:#f92672">.</span>blueprint<span style="color:#f92672">.</span>stack_count <span style="color:#f92672">/</span> (<span style="color:#ae81ff">2</span> <span style="color:#66d9ef">if</span> split <span style="color:#66d9ef">else</span> <span style="color:#ae81ff">1</span>),
            held_item<span style="color:#f92672">.</span>stack_size <span style="color:#f92672">-</span> held_item<span style="color:#f92672">.</span>stack_count
        )
    )

    <span style="color:#66d9ef">if</span> split:
        gui<span style="color:#f92672">.</span>blueprint<span style="color:#f92672">.</span>stack_count <span style="color:#f92672">-=</span> count
        gui<span style="color:#f92672">.</span>update_label()
    <span style="color:#66d9ef">else</span>:
        <span style="color:#66d9ef">if</span> count <span style="color:#f92672">&lt;</span> gui<span style="color:#f92672">.</span>blueprint<span style="color:#f92672">.</span>stack_count:
            gui<span style="color:#f92672">.</span>blueprint<span style="color:#f92672">.</span>stack_count <span style="color:#f92672">-=</span> count
            gui<span style="color:#f92672">.</span>update_label()
        <span style="color:#66d9ef">else</span>:
            gui<span style="color:#f92672">.</span>destroy_blueprint()

    held_item<span style="color:#f92672">.</span>stack_count <span style="color:#f92672">+=</span> count
    _update_label()


<span style="color:#66d9ef">func</span> _swap_items() <span style="color:#f92672">-&gt;</span> void:
    <span style="color:#66d9ef">var</span> item: BlueprintEntity <span style="color:#f92672">=</span> gui<span style="color:#f92672">.</span>blueprint
    gui<span style="color:#f92672">.</span>blueprint <span style="color:#f92672">=</span> null

    <span style="color:#66d9ef">var</span> current_item :<span style="color:#f92672">=</span> held_item

    self<span style="color:#f92672">.</span>held_item <span style="color:#f92672">=</span> item
    gui<span style="color:#f92672">.</span>blueprint <span style="color:#f92672">=</span> current_item


<span style="color:#66d9ef">func</span> _grab_item() <span style="color:#f92672">-&gt;</span> void:
    <span style="color:#66d9ef">var</span> item: BlueprintEntity <span style="color:#f92672">=</span> gui<span style="color:#f92672">.</span>blueprint

    gui<span style="color:#f92672">.</span>blueprint <span style="color:#f92672">=</span> null
    self<span style="color:#f92672">.</span>held_item <span style="color:#f92672">=</span> item


<span style="color:#66d9ef">func</span> _release_item() <span style="color:#f92672">-&gt;</span> void:
    <span style="color:#66d9ef">var</span> item :<span style="color:#f92672">=</span> held_item

    self<span style="color:#f92672">.</span>held_item <span style="color:#f92672">=</span> null
    gui<span style="color:#f92672">.</span>blueprint <span style="color:#f92672">=</span> item


<span style="color:#66d9ef">func</span> _split_items() <span style="color:#f92672">-&gt;</span> void:
    <span style="color:#66d9ef">var</span> count :<span style="color:#f92672">=</span> <span style="color:#a6e22e">int</span>(held_item<span style="color:#f92672">.</span>stack_count <span style="color:#f92672">/</span> <span style="color:#ae81ff">2.0</span>)

    <span style="color:#66d9ef">var</span> new_stack :<span style="color:#f92672">=</span> held_item<span style="color:#f92672">.</span>duplicate()
    new_stack<span style="color:#f92672">.</span>stack_count <span style="color:#f92672">=</span> count
    held_item<span style="color:#f92672">.</span>stack_count <span style="color:#f92672">-=</span> count

    gui<span style="color:#f92672">.</span>blueprint <span style="color:#f92672">=</span> new_stack
    _update_label()


<span style="color:#66d9ef">func</span> _grab_split_items() <span style="color:#f92672">-&gt;</span> void:
    <span style="color:#66d9ef">var</span> count :<span style="color:#f92672">=</span> <span style="color:#a6e22e">int</span>(gui<span style="color:#f92672">.</span>blueprint<span style="color:#f92672">.</span>stack_count <span style="color:#f92672">/</span> <span style="color:#ae81ff">2.0</span>)

    <span style="color:#66d9ef">var</span> new_stack: BlueprintEntity <span style="color:#f92672">=</span> gui<span style="color:#f92672">.</span>blueprint<span style="color:#f92672">.</span>duplicate()
    new_stack<span style="color:#f92672">.</span>stack_count <span style="color:#f92672">=</span> count

    gui<span style="color:#f92672">.</span>blueprint<span style="color:#f92672">.</span>stack_count <span style="color:#f92672">-=</span> count
    gui<span style="color:#f92672">.</span>update_label()

    self<span style="color:#f92672">.</span>held_item <span style="color:#f92672">=</span> new_stack
</pre>
<p><code>InventoryWindow.gd</code></p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">MarginContainer</span>

<span style="color:#66d9ef">signal</span> inventory_changed(panel, held_item)

<span style="color:#66d9ef">var</span> gui: <span style="color:#a6e22e">Control</span>

<span style="color:#66d9ef">onready</span> <span style="color:#66d9ef">var</span> inventory_path :<span style="color:#f92672">=</span> <span style="color:#f92672">$</span><span style="color:#a6e22e">PanelContainer</span><span style="color:#f92672">/</span><span style="color:#a6e22e">MarginContainer</span><span style="color:#f92672">/</span>Inventories

<span style="color:#66d9ef">onready</span> <span style="color:#66d9ef">var</span> inventories :<span style="color:#f92672">=</span> inventory_path<span style="color:#f92672">.</span>get_children()


<span style="color:#66d9ef">func</span> setup(_gui: <span style="color:#a6e22e">Control</span>) <span style="color:#f92672">-&gt;</span> void:
    gui <span style="color:#f92672">=</span> _gui
    <span style="color:#66d9ef">for</span> bar <span style="color:#f92672">in</span> inventories:
        bar<span style="color:#f92672">.</span>setup(gui)


<span style="color:#66d9ef">func</span> _on_InventoryBar_inventory_changed(panel, held_item) <span style="color:#f92672">-&gt;</span> void:
    emit_signal(<span style="color:#e6db74">&quot;inventory_changed&quot;</span>, panel, held_item)
</pre>
<p><code>InventoryBar.gd</code></p>
<pre style="color:#f8f8f2;background-color:#272822">class_name InventoryBar
<span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">HBoxContainer</span>

<span style="color:#66d9ef">signal</span> inventory_changed(panel, held_item)

<span style="color:#66d9ef">export</span> <span style="color:#66d9ef">var</span> InventoryPanelScene: <span style="color:#a6e22e">PackedScene</span>

<span style="color:#66d9ef">export</span> <span style="color:#66d9ef">var</span> slot_count :<span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>

<span style="color:#66d9ef">var</span> panels :<span style="color:#f92672">=</span> []


<span style="color:#66d9ef">func</span> _ready() <span style="color:#f92672">-&gt;</span> void:
    _make_panels()


<span style="color:#66d9ef">func</span> setup(gui: <span style="color:#a6e22e">Control</span>) <span style="color:#f92672">-&gt;</span> void:
    <span style="color:#66d9ef">for</span> panel <span style="color:#f92672">in</span> panels:
        panel<span style="color:#f92672">.</span>setup(gui)
        panel<span style="color:#f92672">.</span>connect(<span style="color:#e6db74">&quot;held_item_changed&quot;</span>, self, <span style="color:#e6db74">&quot;_on_Panel_held_item_changed&quot;</span>)

<span style="color:#66d9ef">func</span> _make_panels() <span style="color:#f92672">-&gt;</span> void:
    <span style="color:#66d9ef">for</span> _i <span style="color:#f92672">in</span> slot_count:
        <span style="color:#66d9ef">var</span> panel :<span style="color:#f92672">=</span> InventoryPanelScene<span style="color:#f92672">.</span>instance()
        add_child(panel)
        panels<span style="color:#f92672">.</span>append(panel)


<span style="color:#66d9ef">func</span> _on_Panel_held_item_changed(panel: <span style="color:#a6e22e">Control</span>, held_item: BlueprintEntity) <span style="color:#f92672">-&gt;</span> void:
    emit_signal(<span style="color:#e6db74">&quot;inventory_changed&quot;</span>, panel, held_item)
</pre>
</body>
</html>
