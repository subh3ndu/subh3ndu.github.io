<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang xml:lang>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>TmpKLjBs7Q1Ei</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <style type="text/css">:root {--c-caption: grey;--c-blue: #26bfe3;--c-green: #02e180;--c-orange: #f2971a;--c-pink: #e3266f;--c-bg: #fff;--c-bg-alt: #f5f5f5;--c-text-header: #fff;--c-text-body: #95989a;--padding: 20px;--padding-inv: calc(-1 * var(--padding));--fonts: "Open Sans", -apple-system, system-ui, "Segoe UI", "Roboto","Helvetica Neue", Arial, sans-serif;--font-size: 1.1rem;}html {font-size: 100%;}body {color: #444;font-family: var(--fonts);font-size: var(--font-size);line-height: 1.7;padding: 1em;margin: auto;max-width: 800px;background: #fefefe;}a {color: #0645ad;text-decoration: none;}a:visited {color: #0b0080;}a:hover {color: #06e;}a:active {color: #faa700;}a:focus {outline: thin dotted;}a::selection {background: rgba(255, 255, 0, 0.3);color: #0645ad;}*::selection {background: rgba(255, 255, 0, 0.3);color: #000;}p {margin: 1em 0;}.caption {text-align: center;color: var(--c-caption);font-style: italic;}.note,.tips,.warning {display: block;width: calc(100% - var(--padding) * 2);padding: 0 var(--padding);padding-bottom: var(--padding);background-color: var(--c-bg-alt);}.note:before,.tips:before,.warning:before {display: block;margin: 0 var(--padding-inv) 10px var(--padding-inv);padding-left: var(--padding);font-style: bold;color: white;}.note:before {content: "Note";background-color: var(--c-blue);}.tips:before {content: "Tips";background-color: var(--c-pink);}.warning:before {content: "Warning";background-color: var(--c-orange);}img {max-width: 100%;}h1,h2,h3,h4,h5,h6 {color: #111;line-height: 125%;margin-top: 2em;font-weight: normal;}h4,h5,h6 {font-weight: bold;}h1 {font-size: 2.5em;}h2 {font-size: 2em;}h3 {font-size: 1.5em;}h4 {font-size: 1.2em;}blockquote {color: #666666;margin: 0;padding-left: 3em;border-left: 0.5em #eee solid;}hr {display: block;height: 2px;border: 0;border-top: 1px solid #aaa;border-bottom: 1px solid #eee;margin: 1em 0;padding: 0;}pre,code,kbd,samp {color: #0084b8;font-family: monospace, monospace;}pre {background-color: #f9f9f9;padding: 1em;font-size: 14px;white-space: pre-wrap;word-wrap: break-word;}code {white-space: pre-wrap;}b,strong {font-weight: bold;}dfn {font-style: italic;color: var(--c-blue);}ins {background: #ff9;color: #000;text-decoration: none;}ul,ol {margin: 1em 0;padding: 0 0 0 2em;}li p:last-child {margin-bottom: 0;}ul ul,ol ol {margin: 0.3em 0;}dl {margin-bottom: 1em;}dt {font-weight: bold;margin-bottom: 0.8em;}dd {margin: 0 0 0.8em 2em;}dd:last-child {margin-bottom: 0;}img {border: 0;-ms-interpolation-mode: bicubic;vertical-align: middle;}figure {display: block;text-align: center;margin: 1em 0;}figure img {border: none;margin: 0 auto;}figcaption {font-size: 0.8em;font-style: italic;margin: 0 0 0.8em;}.author {font-size: 1.2em;text-align: center;}tag {min-width: 3.2em;text-align: center;border-radius: 8px;padding: 0 4px;margin-bottom: 0;margin-top: 4px;margin-right: 0.2em;display: inline-block;color: white;}tag.update {background: var(--c-blue);}tag.new {background: var(--c-green);}tag.update:after {content: "update";}tag.new:after {content: "new";}button {background-color: var(--c-blue);color: white;border: none;cursor: pointer;line-height: 2rem;font-size: 1.2rem;margin: 0.75rem 0;overflow: visible;padding: 0.75rem 1.5rem;border-radius: 1rem;transition: background-color $transition-duration;white-space: nowrap;}</style>
</head>
<body>
<h1 id="synchronizing-beats">Synchronizing Beats</h1>
<p>In this lesson, we’ll get started coding the game.</p>
<p>The first element we’ll add is the backbone of any rhythm game: the <code>Synchronizer</code>.</p>
<p>For now, the <code>Synchronizer</code> will:</p>
<ul>
<li>Play an audio track.</li>
<li>Calculate when a half-beat occurs.</li>
</ul>
<p>The <code>Synchronizer</code> will play the selected track, and given a song’s BPM (Beats Per Minute), it will map the current playback time to beats and half beats. We’ll then use that to know if the player hit a button in rhythm or not.</p>
<p>To calculate that, we’ll use functions found in the <code>AudioStreamPlayer</code> class.</p>
<h2 id="adding-the-beat-synchronizer">Adding the beat synchronizer</h2>
<p>Let’s get to it!</p>
<p>Create a new <em>2D Scene</em> and name it <em>RhythmGameDemo</em>. This scene will hold all of our other scenes, including the <code>Synchronizer</code>.</p>
<p>Add a <em>Node</em> as a child and name it <code>Synchronizer</code>. Attach a script and save it as <code>res://RhythmGame/Synchronizer.gd</code>. Also, add an <code>AudioStreamPlayer</code>, which we’ll use to play soundtracks.</p>
<p>I saved the scene as <code>res://RhythmGameDemo.tscn</code>.</p>
<p><img src="data:image/png;base64,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6f0ZZXb+QuTHU9MU0LJbeYxe7IF+79VGhCrNUMpKt87tsOrLj1A/i97z54oWRaOG9VS1fZ36Ms9JSRt//xvNmjTiziUSGxOLIuZFeJmYmZrBwT61JBQSEqaq/cnpSrn03Ozm6Q8KvIl4VeJyzVB1dnV1VsEgUFtLjzpjihe3TAnk9Jp0UcgJVasTEhK51B8eHpEuURWeXpOOs2XrrpROu1JOjvyYX3fVZxeo3uvtO4YOrazk5hyOHTsJa5vi3FFHw+MOHj7O23N6f0IUlKcmsDYeXBnhqrSYNmXHzq4ERo4YrK2lR9Vr6qXftXsf98Yb0z+bd6gqaCHuHCGXrlzlkhK161FJs1fPLrC0TJ3DnKr91Ms98MXecFZfekcHBwwd0l8F16xLpVRt3rFrD/eyV3GrqIKwHfes29vZ8kSHzuXLonvX57nXn3rSa6uqL3UeeZ30Tpmvi6rm7jWqcmnPxiaLXjyFSmpbtu3i12pQvw5fFKjabRycT9V5qnLXrePOHWc0PXgt9+qc97Dk5hxi42K53bV3z678nuhCQ3J6f0IUlKcmsEarkqOxCYDSGb/UcZ2ZCQuLwNerftTW0qPqPgUxKvmldTcmBvv2H+FOLbJ+w+9ciqJhV8uXUo9zMRw8ZGiTNfrux59UySkUMz8cj1nTx6tAEZ5lJ43RuvW/4ehRL4x553UsXjgT1atW5uosBft4FSyoVEZDmebPnoJXXx6IM2d9sWLVD9qzgU3/bEOiKpEt/Xg2huTQG7/hlz+4g274sJewZNEsvDt6ZEqJmkZE/Pzrn+oCNFS9v7kc0Fas/J7zHpbcnsP+A0c5eB5Wn9u9e6l/t+zenxAFxcTFrW66FsC42BiULp++I6Rb57bqy75BW3s8Ve1dCc3GG9rZ7iXfw67JB3Bld+qg+22b1mhLwN9bdmHV6nUFNo5WPHw0Xnjll0t4SBt17gmht5de7I9Nm3dpawY3/H1hblFUW0v11JRYz230wx9v7sLOBZ5Y0/3PdEGVbN72L055n8XYcTPxyWffSFB9yjSoV4ebQC74XdK2CPHoPDWBlYR6BePK7xcQFxajbUm19NNVGDdpDk6fTf2FjnjyWVlZ8hjWPr264u/N21PamYV4lJ6qwCqePTRGdfrUD3Dc8xS3iwvxOJDAKp5o02Yu5J/Sfr9mg5RWxWNDAqsQQuhMAqsQQuhMAqsQQuhMAqsQQuhMAqsQQuhMAqsQQuhMAqsQQuhMAqsQQuhMAqsQQuhMAqsQQuhMAqsQQuhMAqsQQuhMAqsQQuhMAqsQQuhMAqsQQuhMAqsQQuhMAqsQQuhMAqsQQuhMAqsQQuhMAqsQQuhMAqsQQuhMAqsQQuhMAqsQQuhMAqsQQuhMAqsQQuhMAqsQQuhMAqsQQuhMAqsQQuhMAqsQQuhMAqsQQuhMAqsQQuhMAqsQQuhMAqsQQuhMAqsQQuhMAqsQQuhMAqsQQuhMAqsQQuhMAqsQQuhMAqsQQuhMAqsQQuhMAqsQQuhMAqsQQuhMAqsQQugK+D+C/df+vLeziQAAAABJRU5ErkJggg==" /></p>
<p>In <code>Synchronizer.gd</code>, we start by defining some properties.</p>
<!-- TODO: rename variables to use clear names throughout the project. We can do that only after writing all lessons. -->
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Node</span>

<span style="color:#75715e"># The track&#39;s Beats Per Minute.</span>
<span style="color:#66d9ef">export</span> <span style="color:#66d9ef">var</span> bpm :<span style="color:#f92672">=</span> <span style="color:#ae81ff">124</span>
<span style="color:#75715e"># We store the number of beats and half-beats per per second. We&#39;ll use that to calculate how many beats elapsed in the song.</span>
<span style="color:#66d9ef">var</span> _bps :<span style="color:#f92672">=</span> <span style="color:#ae81ff">60.0</span> <span style="color:#f92672">/</span> bpm
<span style="color:#66d9ef">var</span> _hbps :<span style="color:#f92672">=</span> _bps <span style="color:#f92672">*</span> <span style="color:#ae81ff">0.5</span>
<span style="color:#75715e"># Stores the index of the last half-beat we passed.</span>
<span style="color:#66d9ef">var</span> _last_half_beat :<span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>

<span style="color:#66d9ef">onready</span> <span style="color:#66d9ef">var</span> _stream :<span style="color:#f92672">=</span> <span style="color:#f92672">$</span>AudioStreamPlayer
</pre>
<h3 id="playing-our-track">Playing Our Track</h3>
<p>You can choose to play whatever track you like. The only information you need to know is its BPM beats per minute of the track.</p>
<p>Make sure to check the license of the audio you use as well. The start project includes three royalty-free tracks from <a href="https://incompetech.com/music/">Kevin McLeod</a>, which we’ll work with for the remainder of the course:</p>
<ul>
<li>Cephalopod (BPM: 124).</li>
<li>Disco Lounge (BPM: 110).</li>
<li>Werq (BPM: 125).</li>
</ul>
<p>Every time we play a song, we’ll update the <code>Synchronizer.bpm</code> property accordingly.</p>
<p><em>Note: Make sure to check the track’s BPM! The BPM of Disco Lounge differs from the one listed on the site, for example. You can use a free metronome app like Metronome on Android to tap along with a song and get an accurate value.</em></p>
<p>You can find these tracks in <code>res://RhythmGame/Tracks/</code> along with placeholder icons for each song.</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPwAAAGcCAMAAADK9j27AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAhFBMVEUmLDtUWWViZnGtsLeAhZEYHSg8QU8zO08gJTGDo9JscHuQk5zHyc7MztPg4OArMEB8gIrAw8h1eYRGTFq4usGZnKRBR1SipaxOU2BXXGldYm4yOEY4Pkw2O0qvAM8vNEOLBsVma3dof6WVKMuiQNGf7433jHmRwHfvrnq4cmbb2ny+5YTzVYzaAAARxklEQVR42uydCbOjrBKGUblmPsWoCK6xLOf//8jLatRsnprkxKWpqZxRUfNo0yhvmkZ/DlwQwAP8geH/97myAfjTpwrAAzzAAzzAf6E0rtscFt6l1F0M79GjwfNIFHIqgil8WaTk9mL0eF9mz3kpyok6U3jGq4r2czSO9+XweDiYvIIP05Tnpywq9WpJG6Q+ZYRhZSWFrSKqe4QFPSNeuRN47JVZIQBTfY8TpqqUpM4r93Qq5FpbxUudUxJ52YkXmzV72ea5hfdJdTo5kX+qmEf9k7AAR6xzHeKoyhJ+qOKJy5ZHomn06WYdXiGafGbhyygVRdl876W1wpVsmPDawA9VvERcCXFxTjXZLPzE7MuoykTRm7Cw+YDpGhkm2MKbKnKXVcMvMPsJvE9GHr4n0sgdaQAnjajNvr8+Fqwa/ucOL+2zip6cpC5dj6uuUFh9GWS5tIPQE7fcVNkhvI9T2anJZxwWiv7s5EaiQukR4gk/l3mEywskq+zB7F+VPKoO8Wx/twTsdFT43GH0sK+0HglhMAPgAR7gAR7gb+BXWX4JfpUF4AEe4H+y65/Vl0/Co5UXgAd4gD8k/HlWlsLz2ZBFVR8HPjx7Myk6qf4J3guWrvw6fHU+z0ZoM0rzH8DXTH+EUUQU4pyzTh7Dx9RLiZcsOIlH5d9LVIbqNwXvgU/PNwN1VRL8AJ4n+iPkfhaQ/pYzfAzfeazPstpdcBLqyb9UXGSei/IW+PCc+rcj1lfDN/CeExKKYpymYYNQzwgTRB4WW1ri648wlKBcrKacMCr/ihVuKu8UH1aKq1AQ1tcsLQQAThvDkBVpyrvZZns+efxLlMm9E32et5j9rdHPDN/Cezi7IFzkPucoJ2WTOeqbIBQU5uMKn7qXipQokPeKh6hQd96sFP/JUECKNpZV08Ee8rr15fEmm8359PELcanzKH8jvHe+OzpdJf0MXiLG8stnUZeRbOTJevMhv5RDarEgv11BUSu+aUwcA29WKnNpIlGtSkUNccBKWIa24oRPN9vz6eP3wrck4nqqNh++o59nS+GlxeZanM9RQnhpzZV05iMkJEpdW1d6AkFdp7GBtyvlf2Jpwg6R7ku0+9wRh8y4J0x9unk4nzp+Iy4FC5Bu85d3wD80+2wGHyj47CJKLJwuJlhvwKH9EA7PkbdK15WcLlPmUCTjlfI/li4mgXbh+YUEMUqK6ebhfOr4iOMsatEbzV46vNMShxcos6+Hc5YkVl1V6pgP9aWwF484O5KlpekO7sKjkMUavpJ9V1jMr40+nz6+sCJ5dd4J7y/r6nRPhVklujOUu5dG9DnS4VWyk1cf6kvFLBlxCmOQW7B3aR/AX5jo6vI+yrOoavp0Bm/Pp48vroFqVW+El4bvzPTJq9HP4ONE/igN5R4hRabgbSdvv5QjfOEV3olk4/ALEj6AR23ICGGiO6MpCes5vDkfNw9BoWz6b4V//+PttTRRufJne/9zLzY9W/1b3adeaZucBYeF91IMgxkAD/Cbgz+yaAFaHcAD/D7g/xyiPIJHBygAD/AAD/A7hS85Y7x8NzydHNHF2L9d+/1CiRQwCV0O3wYYv6SYVMjxpY2DcnXwGSFB21IyVpNewCeB75fZT+AdeWnLy+rgeaTGzIKIL4XvwtYK4Bj3HUK+sIQ+FmS5iysUi7W0Q7QSaytr9GHYK3AFb3YrE5zU34VnkUJpI7b4zlummrZNIC5dmzUNFetoUvsNqpO8FWZBcdlkOB/deQtvdmtx3vn5t+EbDZ8uhvcTWsZSCBc+zA+VAoUqcRGokqewbhBUCrHUuYW3u13wZYNmLx0FFfe0DbEo4UWYfZLgwKC2Yafh5UJQ3cIPu9U4+PKNR6VyeAGJqh91dXUiKPxGFNRgx9z5cgxfPoTXuyHU1PjLbV53dfJ3Qc1P4HM8GHgmR9p7Cx+bdv4Q3u5mjvL9h5yUV150pX8Of3H8NpdNusZZ45foEuZdiS08cqXDix/D292Em+yqr8MbnWhE/xy+pVj0UbHus6ThVqLrygb42NVd3UN4s5s8DPXR6ugP+GLTeMw/7ltd68MrLcADPMADPIgWoNUBPMAfDB4fojyCP0JXB/AAD/AAD/AAv9thPMdpDgvvuK7zc/g4PjA8pceFb6OoHS3OQtXvlqI3EfKbh+fnMx/DT0PV75YgMxHyW4d3ZFzSSOI18Xsmtt3Ew8cxTnVMoYqp9wKkI+TvBddvBb5MikhHZUVFUk7gTWy7mruAY4RZ6SdpY2LqZQikChW+F1y/FXg6jkqjozavL0DCZbyvjOOOibQNYQYqpn6AvxtcvxmzT67sybjNX4bY9oLKGMlc+URhFHoKDwt/L7h+Q20eW3Y8bfNDbHvgScxsgA+m8LfB9VtyeEyzpzOHN8S2C5snciYIa/YDPE/uBtdvCj7V8GQGP8S2I+5Jnzc4vAFeRcjfBtdvCt56+3lXZ2PbUa1+7iWj2osSjeAvMkL+Nrh+U/Dns1eWxfm8/ef7n8M3heqkcn45IPzhX2kBHuABHuABHuABHuABHuABfuvwf/9T5e8h4f8zZeHh7TzH+4JfOPA8mgJxR/Bj418wz/GG4R1XxpKqihN4Y/wL5jneMHydBHEcqADou/Cv5zneMHwXJIH41z2Cfz3P8ZbbvKDX7PfhX89zvGmH17luh57CP5/neIfefgz/fJ7jvcM/ned4V4+3+3jIhRcbgAd4gAd4gAd4VXyAB3iAB3iAB/jjwT9Vb343BeXvw99Tbz6agnKN8GP15qMpKNcIPzb+T6ag/D78C/Xmkykovw//Qr35ZArK78Hr8lK9+WAKyjW0+efqzQdTUK7C4T1Vbz6XgnLN3n4E/5kUlBuB/0wKynU+3r5Sb34jBeVqX2z61UqVH4f/nRSUK4X/nRSU8D4P8AAP8J+B9wEe4AEe4AEe4I8H/+bYm9+Rdt4Ffz/2ppq9yk/mRQvDbcOrQfwJ/DT2hrMpYLgneDmIf2dIyxp/S2oVacDkWHZBr/OiqZ8mG3i7aNWahpOUbgFeDuLHD8fz5ARprB/Bm3nRzOxBBt4uWrUm9DI/JFto811gUg/ehWcBSrw5/DBvlIYfFmVJOOrkcrdieKveiK/+DL6MWuRLqWUCP0yXpuGHRaPW6GW2gTsfG+HqwTC2ygyHDbxn4LMpvF20ao2G34jD69AjeGG7eZ4naayCy+KU2nnR7pq9VWu6SAXmbKKr69BD+IDpS+AKpjhOIjrMi2Ycnp431CwOas12HN7NQ84I3jgxXKALT1Mc0tG8aHK6NN0qhkWr1qiuLtwU/CZjb+DFBuABHuABHuABHuABHuABHuABHuAXKDZesF/4B/E21/w2KrXBypLZfFKxmeS3kfBrS2bzScXG6lGd1WDGyWxGOW42Cv9csbHww5DkNZnNJMfNVtv8U8VGtfmxBnNNZjPJcbMt+IWKjclvc9VgrvlcJjluNnrnXyg2Jq3ToMFY+FmOm+06vMeKjYW/ajDXZDaTHDeb7eqeKDZDVzdxeBPRZtPwtw85Nw6PjDSYSTKba46bvTzegmIDb3UAD/AAD/AAD/AAD/AAD/AAD/AbfaX9e0j4u4qNGsYqo/VJNW8axnqq2Azwa5Nq3gK/RLGR8INUY5Lc7AJ+iWJj4PWAvUlys482/1qxkb8qvw7Yk2zzZv8TxSbvR/DjJDebv/NLFJux2Y+T3OzB4b1UbCy8TWtiktzsoat7qthM4KVUY5Pc7PQh5zG8lGpskpt9Pt6CYgNvdQAP8AAP8AAP8AAP8AAP8AAP8Bt9pV3+MruGmJsPKjZMj92Gx4EfDdP4eV6Eed4eB35q/HrEVkfS2FnPZHyNp5IcxMWXJZx/gn+R02aAV5E0dtYzzKq81gpWEX9Xwvkn+Bc5bQb4IZIm4SbQQKzsE9Z8WcL5J8XmRU6bAV5F0kxmPRMreSSvwlclnH8WKp/ktBngpW+bznomVrLQUxlcvijh/KtQ+SynzQTezno2mH0Qe/ro35NwPilaTOCHWc8wc/JahddkxPmuhPNr8MOsZ10oujodW0TT8qsSDig28GID8AAP8AAP8AD/CN7/f3tnw52oDoRhFJbTI3Aw5cuv1XbV3bX9///vkjAzELTI7QYEmdhaSFJOn4ZEmJeZYXiGZ3iGZ3iGnx78/1Nvrgz49y36pmz+XcDfzGmzdWJfJOlk4KsWmm1sb9LZ8jAZeM3fJgbu0BHC20q7feartB32a+LH0riNko7KxYxh07AXVhjNcmMM/o56Q0kqnCx1k0Tmq40slazdFvPdWm6gpKOeT8coQtiLckGYTPpgDL5ZvfmJSaxCSRIFB0vZreVD6baUcTOIELZMFHwZPwp6YYXZLDf/DN9OvdkhfBqIvARpMW9fbdBzpBsGSDqyJdUih+W9sMJslhtzc75RvQlxsNIg2uUlLJgVPKRlR0lHWfS1mHF5r0iDH+CC16jeJHEI/4UNrNjybE+8Eh4lHf20h1502hvNctP5ag/wrrDn0SofWydeu9GiWOcWwaqEJ0lHX/Cg17AXvDvwluuJQGShCogWO3IU8aMO4EnSUR91GDYNe2GF0Sw3HV7eNl/ktpu33T688rAbG4Zn+AnCszGD4Rl+9PAuwzM8wzM8w08bPlxdfl8mCe/OL79l+calfLc2/B7gFfllXoEfinrTA/zfv5fVQf4g9qGoN73AFz9oznei3mDlwQM7F20MAb5U7jpRbyqVqaqkjYfCf3zo+52oN1eVbbQdo/DXpYT/Q906UW/SuqrRRt7ofOSjeQH/QfidqDfREOHnn3mR4/6ZvwC/C/XmqrKNttMxfPjn/Hk+S/hz/gJ44+pN4auIlenOKRY82HjcyJ/zopjPlVlvWr2R8Fql/LUWjzF0Db/O4Wf6gteDGdt+r288aMHbbHu34R/8WW1jwLe0JuEXG9f15IpKGxOCf7d9kaXVDTZmMDzDMzzDMzzDMzzDG4X/oZdJwf9408u04I+n0+mYF4B/+be/1rBdvw/4Av9II5+9Twr+hGNf3HVGE4I/1uY8yjD2z6oaI+IyH3vZakzRodb+4F+Op+sFr7BKqthopXFyZUU+RcnCVoOKDrX2Cf/2tldfOjwEidLN0ijVlK0G/XHoGB3B35BsXgB9v39TL4SH8GCpJkhgvpOy1aA/Dh2jK/gbI79X3ApcvtXgI+0Pv4Y36I9Dx+gP3toDe/G9//K01+Cp1aA/Dh2jT3jFTKWy4KnYaLRY6fDUak7RodZ+R/4mPMRGIzVGg6+2mlJ0qLU/+PAW/ENM27dahwUfClVWzwF/mPLIW6FepgU/GUsOwzM8wzM8wzM8wzM8wz8r/K+xhPvuKyqazEgee/LJsK/1Gs8bLbwKjqXBV4UZL3HTdSZt0V/rNSOGl8GxdHgtKpoCS+Li3hKy19RkG4DH3XgORnqSc8htBqWcwcDL4FjhNbyWlzoNImW4huw1NdkG4HG3hEc5h9xmUMoZzpw/FDHRmuDDYFMks4g0CzXYnqEP7pbwoNOQBENSzqPhS1+a8D68FazVaV9kr6nLNnh2wG4JDzpNxYUEpJzBjHwIAeGa4CPUnlT2mrpsg32q8BIcDdYVeJByhrTgHaw78IlNxrSVH9457aWjQCgq8CTBkJQzoI+6g9UArz7qRFSMHGSvqck2XpLmpdzNwnAZVOBLtxmUcgZ8kaPBB4Efey6ctpC9pibbeCq5H+3uEiEcrwpPTxuglDPcy9uOLnLtd2OHGt2NzR23meeFb+E287zwLdxm+H6e4Rme4b8s29lsO1l4KAzP8AzP8AzP8NaTKjZdwN9QbNQTvxv16KuXPCF8o2KzkCmXPSEPFy+eEL5RsUmDnWUJJ5bBodLSd2bm+a9twpcNHr5ZsRFzKxJbP7XmouI7YzvRzmymhkfN+XuKzTKREoRygkHfmUzZpUympukV3mqp2LzH0vK4yKQUUfrOvFqo0MSjhKfSrNjkUz2HdAM5+UvfmQXB2+OGb1ZsrNiRzj22Z1d9ZyRxocP444ZvVmwsx1+qd3lE8p1RxONd8KyGixwNvrjCWQVSiCPfGUVsNAvbw+G/o9g8Dfx3CsMz/AThR3ljw/BPA/8fV4d2sKeEdXoAAAAASUVORK5CYII=" /></p>
<p>Select the <em>AudioStreamPlayer</em> and drag your audio file to the <em>Stream</em> property on the right. Godot can import .wav, .ogg, and .mp3 audio files from Godot 3.2.4.</p>
<p><img src="data:image/png;base64,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" /></p>
<p>Now, let’s add a function to start music playback. We make sure to start the audio as the next mix occurs. The output latency is how long the sound gets from the game to the speakers.</p>
<!-- TODO: Why do we need to calculate that time delay and wait for it? What does it do for us? What's the "next mix"? You briefly touch on it later in the lesson but the explanation should be here. -->
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#66d9ef">func</span> play_audio() <span style="color:#f92672">-&gt;</span> void:
    <span style="color:#66d9ef">var</span> time_delay :<span style="color:#f92672">=</span> <span style="color:#a6e22e">AudioServer</span><span style="color:#f92672">.</span>get_time_to_next_mix() <span style="color:#f92672">+</span> <span style="color:#a6e22e">AudioServer</span><span style="color:#f92672">.</span>get_output_latency()
    yield(get_tree()<span style="color:#f92672">.</span>create_timer(time_delay), <span style="color:#e6db74">&quot;timeout&quot;</span>)

    _stream<span style="color:#f92672">.</span>play()
</pre>
<p>For now, we’ll play the audio when running the scene, using the <code>_ready()</code> function.</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#66d9ef">func</span> _ready() <span style="color:#f92672">-&gt;</span> void:
    play_audio()
</pre>
<p>When you run the game using <kbd>F5</kbd>, you’ll be prompted to choose the main scene.</p>
<p>Select <em>RhythmGameDemo.tscn</em> as the main scene, and you’ll hear the track play.</p>
<p>Now, we’re going to check whether a new half-beat is reached each frame in the <code>_process()</code> function.</p>
<h2 id="finding-the-exact-beat-in-a-track">Finding the exact beat in a track</h2>
<p>As we’re making a rhythm game, we must know how far into a track we are at any given time.</p>
<p>We’ll use other functions found in the <code>AudioStreamPlayer</code> node to be as accurate as possible, so gameplay elements align with the music track.</p>
<p>Every frame, we start by calculating the last played half-beat.</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#66d9ef">func</span> _process(_delta: <span style="color:#a6e22e">float</span>) <span style="color:#f92672">-&gt;</span> void:
    <span style="color:#66d9ef">var</span> time: <span style="color:#a6e22e">float</span> <span style="color:#f92672">=</span> _stream<span style="color:#f92672">.</span>get_playback_position()

    <span style="color:#75715e"># Calculate the current half-beat using</span>
    <span style="color:#75715e"># half-beats-per-second</span>
    <span style="color:#66d9ef">var</span> half_beat :<span style="color:#f92672">=</span> <span style="color:#a6e22e">int</span>(time <span style="color:#f92672">/</span> _hbps)

    <span style="color:#66d9ef">if</span> half_beat <span style="color:#f92672">&gt;</span> _last_half_beat:
        _last_half_beat <span style="color:#f92672">=</span> half_beat
</pre>
<p>This might seem adequate on the surface, but there’s a problem. The issue is that although we call <code>AudioStreamPlayer.get_playback_position()</code> every frame, the returned value is calculated every time there’s an audio mix.</p>
<p>In Godot, audio is mixed in small chunks before playback. To demonstrate the problem this may cause us, here’s an explanation with extreme values.</p>
<p>Let’s assume that Godot mixes audio every 0.5 seconds (it mixes audio <em>much</em> quicker than this in reality).</p>
<p><img src="data:image/png;base64,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" /></p>
<p>Also, assume that our track is fast enough that half-beats occur in the following way:</p>
<p><img src="data:image/png;base64,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" /></p>
<!-- TODO: What's Playback Position below, what's the difference with Play Time? Above, the code uses _stream.get_playback_position() to get what corresponds to `Play Time` below, so that'd confuse people I think. -->
<p>If we run with out code through the first second of the song, we can see the value <code>half_beat</code> would take:</p>
<p><img src="data:image/png;base64,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" /></p>
<p>This is not ideal and will cause objects to spawn out of sync with the playing track!</p>
<p>We need to be more accurate when calculating the playback position, so we’ll alter our code to consider the amount of time elapsed since the last mix.</p>
<p>To be even more accurate, we’ll factor in the output latency, how long it takes for the mixed audio to reach the speakers.</p>
<p>We update the <code>time</code> calculation with the following:</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#66d9ef">func</span> _process(_delta: <span style="color:#a6e22e">float</span>) <span style="color:#f92672">-&gt;</span> void:
    <span style="color:#66d9ef">var</span> time: <span style="color:#a6e22e">float</span> <span style="color:#f92672">=</span> (
        _stream<span style="color:#f92672">.</span>get_playback_position()
        <span style="color:#f92672">+</span> <span style="color:#a6e22e">AudioServer</span><span style="color:#f92672">.</span>get_time_since_last_mix()
        <span style="color:#f92672">-</span> <span style="color:#a6e22e">AudioServer</span><span style="color:#f92672">.</span>get_output_latency()
    )
    <span style="color:#75715e">#...</span>
</pre>
<p>With this, we have a reliable way to calculate the half-beats of a song!</p>
<p>In the next lesson, we’ll set up the event bus design pattern to eventually connect the <code>Synchronizer</code> to the <code>HitSpawner</code>.</p>
<h2 id="code-reference">Code reference</h2>
<p><code>Synchronizer.gd</code></p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Node</span>

<span style="color:#66d9ef">export</span> <span style="color:#66d9ef">var</span> bpm :<span style="color:#f92672">=</span> <span style="color:#ae81ff">124</span>

<span style="color:#66d9ef">var</span> _bps :<span style="color:#f92672">=</span> <span style="color:#ae81ff">60.0</span> <span style="color:#f92672">/</span> bpm
<span style="color:#66d9ef">var</span> _hbps :<span style="color:#f92672">=</span> _bps <span style="color:#f92672">*</span> <span style="color:#ae81ff">0.5</span>
<span style="color:#66d9ef">var</span> _last_half_beat :<span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>

<span style="color:#66d9ef">onready</span> <span style="color:#66d9ef">var</span> _stream :<span style="color:#f92672">=</span> <span style="color:#f92672">$</span>AudioStreamPlayer


<span style="color:#66d9ef">func</span> _ready() <span style="color:#f92672">-&gt;</span> void:
    play_audio()


<span style="color:#66d9ef">func</span> play_audio() <span style="color:#f92672">-&gt;</span> void:
    <span style="color:#66d9ef">var</span> time_delay :<span style="color:#f92672">=</span> <span style="color:#a6e22e">AudioServer</span><span style="color:#f92672">.</span>get_time_to_next_mix() <span style="color:#f92672">+</span> <span style="color:#a6e22e">AudioServer</span><span style="color:#f92672">.</span>get_output_latency()
    yield(get_tree()<span style="color:#f92672">.</span>create_timer(time_delay), <span style="color:#e6db74">&quot;timeout&quot;</span>)

    _stream<span style="color:#f92672">.</span>play()


<span style="color:#66d9ef">func</span> _process(_delta: <span style="color:#a6e22e">float</span>) <span style="color:#f92672">-&gt;</span> void:
    <span style="color:#66d9ef">var</span> time: <span style="color:#a6e22e">float</span> <span style="color:#f92672">=</span> (
        _stream<span style="color:#f92672">.</span>get_playback_position()
        <span style="color:#f92672">+</span> <span style="color:#a6e22e">AudioServer</span><span style="color:#f92672">.</span>get_time_since_last_mix()
        <span style="color:#f92672">-</span> <span style="color:#a6e22e">AudioServer</span><span style="color:#f92672">.</span>get_output_latency()
    )

    <span style="color:#66d9ef">var</span> half_beat :<span style="color:#f92672">=</span> <span style="color:#a6e22e">int</span>(time <span style="color:#f92672">/</span> _hbps)

    <span style="color:#66d9ef">if</span> half_beat <span style="color:#f92672">&gt;</span> _last_half_beat:
        _last_half_beat <span style="color:#f92672">=</span> half_beat
</pre>
</body>
</html>
