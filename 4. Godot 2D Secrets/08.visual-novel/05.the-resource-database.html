<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang xml:lang>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Tmpd8z4bslA50</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <style type="text/css">:root {--c-caption: grey;--c-blue: #26bfe3;--c-green: #02e180;--c-orange: #f2971a;--c-pink: #e3266f;--c-bg: #fff;--c-bg-alt: #f5f5f5;--c-text-header: #fff;--c-text-body: #95989a;--padding: 20px;--padding-inv: calc(-1 * var(--padding));--fonts: "Open Sans", -apple-system, system-ui, "Segoe UI", "Roboto","Helvetica Neue", Arial, sans-serif;--font-size: 1.1rem;}html {font-size: 100%;}body {color: #444;font-family: var(--fonts);font-size: var(--font-size);line-height: 1.7;padding: 1em;margin: auto;max-width: 800px;background: #fefefe;}a {color: #0645ad;text-decoration: none;}a:visited {color: #0b0080;}a:hover {color: #06e;}a:active {color: #faa700;}a:focus {outline: thin dotted;}a::selection {background: rgba(255, 255, 0, 0.3);color: #0645ad;}*::selection {background: rgba(255, 255, 0, 0.3);color: #000;}p {margin: 1em 0;}.caption {text-align: center;color: var(--c-caption);font-style: italic;}.note,.tips,.warning {display: block;width: calc(100% - var(--padding) * 2);padding: 0 var(--padding);padding-bottom: var(--padding);background-color: var(--c-bg-alt);}.note:before,.tips:before,.warning:before {display: block;margin: 0 var(--padding-inv) 10px var(--padding-inv);padding-left: var(--padding);font-style: bold;color: white;}.note:before {content: "Note";background-color: var(--c-blue);}.tips:before {content: "Tips";background-color: var(--c-pink);}.warning:before {content: "Warning";background-color: var(--c-orange);}img {max-width: 100%;}h1,h2,h3,h4,h5,h6 {color: #111;line-height: 125%;margin-top: 2em;font-weight: normal;}h4,h5,h6 {font-weight: bold;}h1 {font-size: 2.5em;}h2 {font-size: 2em;}h3 {font-size: 1.5em;}h4 {font-size: 1.2em;}blockquote {color: #666666;margin: 0;padding-left: 3em;border-left: 0.5em #eee solid;}hr {display: block;height: 2px;border: 0;border-top: 1px solid #aaa;border-bottom: 1px solid #eee;margin: 1em 0;padding: 0;}pre,code,kbd,samp {color: #0084b8;font-family: monospace, monospace;}pre {background-color: #f9f9f9;padding: 1em;font-size: 14px;white-space: pre-wrap;word-wrap: break-word;}code {white-space: pre-wrap;}b,strong {font-weight: bold;}dfn {font-style: italic;color: var(--c-blue);}ins {background: #ff9;color: #000;text-decoration: none;}ul,ol {margin: 1em 0;padding: 0 0 0 2em;}li p:last-child {margin-bottom: 0;}ul ul,ol ol {margin: 0.3em 0;}dl {margin-bottom: 1em;}dt {font-weight: bold;margin-bottom: 0.8em;}dd {margin: 0 0 0.8em 2em;}dd:last-child {margin-bottom: 0;}img {border: 0;-ms-interpolation-mode: bicubic;vertical-align: middle;}figure {display: block;text-align: center;margin: 1em 0;}figure img {border: none;margin: 0 auto;}figcaption {font-size: 0.8em;font-style: italic;margin: 0 0 0.8em;}.author {font-size: 1.2em;text-align: center;}tag {min-width: 3.2em;text-align: center;border-radius: 8px;padding: 0 4px;margin-bottom: 0;margin-top: 4px;margin-right: 0.2em;display: inline-block;color: white;}tag.update {background: var(--c-blue);}tag.new {background: var(--c-green);}tag.update:after {content: "update";}tag.new:after {content: "new";}button {background-color: var(--c-blue);color: white;border: none;cursor: pointer;line-height: 2rem;font-size: 1.2rem;margin: 0.75rem 0;overflow: visible;padding: 0.75rem 1.5rem;border-radius: 1rem;transition: background-color $transition-duration;white-space: nowrap;}</style>
</head>
<body>
<h1 id="the-resource-database">The resource database</h1>
<p>In our visual novel, we need to display different characters, backgrounds, and so on. To do so, we need access to related resources that store the texture and metadata to display.</p>
<p>So far, we used temporary code to preload our characters in the <code>CharacterDisplayer</code>.</p>
<p>In this tutorial, we will create a resource database, a singleton that will find and load all characters and backgrounds in the game, giving us access to them on-the-fly.</p>
<p>We code it now because it is a dependency of the scene player, which we will create in the next lesson.</p>
<p>First, let’s code a new resource for the backgrounds, so we have two types of resources to load. It will allow us to make our resource database a bit <em>DRY</em>.</p>
<p><em>DRY, which you read like the word dry, stands for Don’t Repeat Yourself. It’s a programming principle that states we should avoid code duplication. In games, it’s one we typically apply loosely because of our job’s nature: we delete a lot of code, limiting the value of some strict programming practices found in environments where you tend to pile up code instead. But DRY’s an excellent rule to follow when repetition adds a real technical debt.</em></p>
<p>We start by creating a new script in the background directory, named <code>Background.gd</code>, and open it. There, we only export some fields to edit them in the inspector.</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#75715e">## Data container for backgrounds</span>
class_name Background
<span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Resource</span>

<span style="color:#66d9ef">export</span> <span style="color:#66d9ef">var</span> id :<span style="color:#f92672">=</span> <span style="color:#e6db74">&quot;background_id&quot;</span>
<span style="color:#66d9ef">export</span> <span style="color:#66d9ef">var</span> display_name :<span style="color:#f92672">=</span> <span style="color:#e6db74">&quot;Display Name&quot;</span>
<span style="color:#66d9ef">export</span> <span style="color:#66d9ef">var</span> texture: <span style="color:#a6e22e">Texture</span>
</pre>
<p>Be sure to save the script so it registers as a new resource type.</p>
<p>Then, create a new resource of type <code>Background</code> in the <code>Backgrounds/</code> directory. You can name the file <code>industrial_building.tres</code>.</p>
<p><img src="data:image/png;base64,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" /></p>
<p>In the <em>Inspector</em>, set its <em>Id</em> to <code>industrial_building</code>, its <em>Display Name</em> to <code>Industrial building</code>, and assign <code>industrial-building.jpg</code> to its <em>Texture</em>.</p>
<p><img src="data:image/png;base64,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" /></p>
<h2 id="coding-the-resource-database">Coding the resource database</h2>
<p>With both <code>Character</code> and <code>Background</code> resources in our <em>FileSystem</em>, we can start coding the database.</p>
<p>Create a new script in the <code>Autoloads/</code> directory named <code>ResourceDB.gd</code> (<em>you can create the directory if necessary</em>). The script should extend <code>Node</code>.</p>
<p>We register it as a singleton by going to <em>Project -&gt; Project Settings -&gt; AutoLoad</em>, setting the path to our script, and clicking the <em>Add</em> button.</p>
<p>Ensure that the name is <code>ResourceDB</code>, with the last two letters capitalized, <em>not</em> <code>ResourceDb</code> with a lowercase <code>b</code>. You can double-click on the <em>Name</em> to modify it.</p>
<p><img src="data:image/png;base64,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" /></p>
<p>Let’s get coding.</p>
<p>The heart of the <code>ResourceDB</code> is its loading function. We define one generic loading function that can load and filter a particular type of resource in a directory.</p>
<p>The function works like so:</p>
<ol type="1">
<li>We open and loop over one directory using a <code>Directory</code> object.</li>
<li>For every filename that ends with <code>.tres</code>, we load that file and store the resulting resource in a variable.</li>
<li>We call a type-checking function on the resource to ensure it matches the type we expect. If so, we store it in a dictionary.</li>
</ol>
<p>After looping over the entire directory, we return our dictionary.</p>
<p>To loop over a directory’s contents in Godot, we have to:</p>
<ol type="1">
<li>Create a <code>Directory</code> object and call its <code>open()</code> method with a path to the directory.</li>
<li>Call <code>Directory.list_dir_begin()</code> to initialize the loop.</li>
<li>Call <code>Directory.get_next()</code> to get the first entry’s name.</li>
<li>Define a while loop in which we wait to encounter an empty filename. It is a sign that we reached the end of the directory.</li>
<li>Inside the loop, we call <code>Directory.get_next()</code> to get the next entry’s filename.</li>
<li>Finally, after the loop, we call <code>Directory.list_dir_end()</code> to clean up the object’s state.</li>
</ol>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#75715e">## Auto-loaded node that loads and gives access to all [Background] resources in the game.</span>
<span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Node</span>


<span style="color:#75715e">## Finds and loads resources of a given type in `directory_path`.</span>
<span style="color:#75715e">## As we don&#39;t have generics in GDScript, we pass a function&#39;s name to do type checks.</span>
<span style="color:#75715e">## We call that function on each loaded resource with `call()`.</span>
<span style="color:#66d9ef">func</span> _load_resources(directory_path: <span style="color:#a6e22e">String</span>, check_type_function: <span style="color:#a6e22e">String</span>) <span style="color:#f92672">-&gt;</span> <span style="color:#a6e22e">Dictionary</span>:
    <span style="color:#66d9ef">var</span> directory :<span style="color:#f92672">=</span> <span style="color:#a6e22e">Directory</span><span style="color:#f92672">.</span>new()
    <span style="color:#66d9ef">if</span> directory<span style="color:#f92672">.</span>open(directory_path) <span style="color:#f92672">!=</span> OK:
        <span style="color:#66d9ef">return</span> {}

    <span style="color:#66d9ef">var</span> resources :<span style="color:#f92672">=</span> {}

    directory<span style="color:#f92672">.</span>list_dir_begin()
    <span style="color:#66d9ef">var</span> filename <span style="color:#f92672">=</span> directory<span style="color:#f92672">.</span>get_next()
    <span style="color:#66d9ef">while</span> filename <span style="color:#f92672">!=</span> <span style="color:#e6db74">&quot;&quot;</span>:
        <span style="color:#75715e"># Note that we only loop over only one directory; we don&#39;t explore</span>
        <span style="color:#75715e"># subdirectories.</span>
        <span style="color:#66d9ef">if</span> filename<span style="color:#f92672">.</span>ends_with(<span style="color:#e6db74">&quot;.tres&quot;</span>):
            <span style="color:#75715e"># `String.plus_file()` safely concatenate paths following Godot&#39;s</span>
            <span style="color:#75715e"># virtual filesystem.</span>
            <span style="color:#66d9ef">var</span> resource: <span style="color:#a6e22e">Resource</span> <span style="color:#f92672">=</span> load(directory_path<span style="color:#f92672">.</span>plus_file(filename))

            <span style="color:#75715e"># Here&#39;s where we check the resource&#39;s type. If it doesn&#39;t match the</span>
            <span style="color:#75715e"># one we expect, we skip it.</span>
            <span style="color:#75715e"># Resources are reference-counted so as the local variable</span>
            <span style="color:#75715e"># `resource` clears, Godot frees the object from memory.</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> call(check_type_function, resource):
                <span style="color:#66d9ef">continue</span>

            <span style="color:#75715e"># If the resource passes the type check, we store it.</span>
            resources[resource<span style="color:#f92672">.</span>id] <span style="color:#f92672">=</span> resource
        filename <span style="color:#f92672">=</span> directory<span style="color:#f92672">.</span>get_next()
    directory<span style="color:#f92672">.</span>list_dir_end()

    <span style="color:#66d9ef">return</span> resources
</pre>
<p>To make this function work with any resources we might want to load, like backgrounds, characters, maybe animations, and more, we define functions that we can use to check the resources’ type.</p>
<p>They take a resource as their input parameter and return <code>true</code> if the resource is of a specific type. We pass them to <code>_load_resources()</code> as an argument by name and use <code>call()</code> to call them.</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#66d9ef">func</span> _is_character(resource: <span style="color:#a6e22e">Resource</span>) <span style="color:#f92672">-&gt;</span> <span style="color:#a6e22e">bool</span>:
    <span style="color:#66d9ef">return</span> resource is Character


<span style="color:#66d9ef">func</span> _is_background(resource: <span style="color:#a6e22e">Resource</span>) <span style="color:#f92672">-&gt;</span> <span style="color:#a6e22e">bool</span>:
    <span style="color:#66d9ef">return</span> resource is Background
</pre>
<p>As your project grows, you’re likely to have different kinds of resources in a given folder. You could use a filename suffix as a convention to differentiate specific types of resources, but this is error-prone.</p>
<p>With this approach, even if we may load resources we don’t need sometimes, that shouldn’t happen much, and the files should be tiny and quick to load, especially for a visual novel, which is typically a lightweight kind of game.</p>
<p>Our loaded resources end up in a dictionary with the form <code>{ resource_id: resource_object }</code>, giving us access to any resource through its unique identifier.</p>
<p>To load backgrounds and characters specifically, we add two variables that store the return value of a call to <code>_load_resources()</code>.</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#66d9ef">onready</span> <span style="color:#66d9ef">var</span> _characters :<span style="color:#f92672">=</span> _load_resources(<span style="color:#e6db74">&quot;res://Characters/&quot;</span>, <span style="color:#e6db74">&quot;_is_character&quot;</span>)
<span style="color:#66d9ef">onready</span> <span style="color:#66d9ef">var</span> _backgrounds :<span style="color:#f92672">=</span> _load_resources(<span style="color:#e6db74">&quot;res://Backgrounds/&quot;</span>, <span style="color:#e6db74">&quot;_is_background&quot;</span>)
</pre>
<p>The advantage of this approach is that it’s easy to add new types of resources to load. For example, if you want to add music to the database, you can add a variable and a type-checking function.</p>
<p>Note that here, we preload everything into memory. This is perfectly fine while prototyping, but if your game has hours of content, you will likely need a different approach to only load the resources a scene needs, especially on mobile devices where memory is limited.</p>
<p>To get access to our characters and backgrounds, we define some functions. We don’t directly give access to the dictionaries to provide consistent behavior. Our functions will always return a resource or <code>null</code>. Using functions makes it easy to refactor the code moving forward, for example, if we want to change the way we store resources.</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#75715e"># The database only allows you to get a resource of a given type. Below, we</span>
<span style="color:#75715e"># define two functions to get a character by ID or the default character, called</span>
<span style="color:#75715e"># the narrator in this project.</span>
<span style="color:#66d9ef">func</span> get_character(character_id: <span style="color:#a6e22e">String</span>) <span style="color:#f92672">-&gt;</span> Character:
    <span style="color:#66d9ef">return</span> _characters<span style="color:#f92672">.</span>get(character_id)


<span style="color:#66d9ef">func</span> get_background(background_id: <span style="color:#a6e22e">String</span>) <span style="color:#f92672">-&gt;</span> Background:
    <span style="color:#66d9ef">return</span> _backgrounds<span style="color:#f92672">.</span>get(background_id)
</pre>
<p>We also define a default character, our game’s narrator. This character is a special one that does not have any portrait. I invite you to create a new character resource in the characters directory named <code>narrator.tres</code>.</p>
<p><img src="data:image/png;base64,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eL+Im6qstfzeNGGHaC4z6JQJvynD3OY3cVOVtTWfUTZvPU27wCYG/PPxoyprI89MrcpVNtfNpkrh92z8qMrazO9zqeTVXeP+fNxWZW26S2EM4/1185llVdam+5TdUyUw+f0FsX/dNFfEVLEkjPnMK2Y1e+sEWtYJ4vy9CfVNzN9fGpvrYjZX84X3r+B69f92J3DHncAddwJ33Ikn3L+JQ+psvhmKvw7ccccdd9xxxx133AnccSdwx53AHXfccccdd9xxx53AHXcCd9wJ3HHHHXfccccdd9xxxx13AnfcCdxxJ3DHHXfccccdd9xxJ3DHncAddwJ33HHHHXfccccddwJ33AnccSdwxx133HHHHXfccccdd9wJ3HEncMeduHUPnyNvwoEJR7i/0d3EI437e90HFw7cgPs73c0g8J59MLi/zd0Ecfv9bYO+wf2N8xlnw7/WMZ9hHok77uQZzqsE80ium4gn1gkM7u91Z12MeSTuuOOOO4E77gTuuBO444477rjjjjvuuOOOO+4E7rgTuONO4I477rjjjjvuuONO4I47gTvuBO6444477rjjjjvuBO64E7jjTuCOO+6444477rjjjjvuuBO4407gjjuBO+6444477rjjjjuBO+4E7h/v/h8QHtPYqz5D/QAAAABJRU5ErkJggg==" /></p>
<p>With that, we can add some code to get our game’s narrator in <code>ResourceDB</code>.</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#66d9ef">const</span> NARRATOR_ID :<span style="color:#f92672">=</span> <span style="color:#e6db74">&quot;narrator&quot;</span>

<span style="color:#66d9ef">func</span> get_narrator() <span style="color:#f92672">-&gt;</span> Character:
    <span style="color:#66d9ef">return</span> _characters<span style="color:#f92672">.</span>get(NARRATOR_ID)
</pre>
<p>And with that, we have resource loading in place. We will put it to use in the next lessons, where we will define our scene player.</p>
<p>If you’d like to test that the script works, you can define the following <code>_ready()</code> function in <code>ResourceDB.gd</code>.</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#66d9ef">func</span> _ready() <span style="color:#f92672">-&gt;</span> void:
    print(_characters)
    print(_backgrounds)
</pre>
<p>Then, run any scene to see the output. Autoloads are automatically-loaded nodes that Godot right below the root of your scene tree. As such, they have access to all built-in callbacks like any other node, like <code>_ready()</code>.</p>
<p>Here, I ran the text box’s scene and switched to the <em>Remote</em> scene tree in the <em>Scene</em> dock.</p>
<p><img src="data:image/png;base64,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" /></p>
<p>The <em>Output</em> bottom panel should display something like the following:</p>
<pre style="color:#f8f8f2;background-color:#272822">{dani:[<span style="color:#a6e22e">Resource</span>:<span style="color:#ae81ff">1224</span>], sophia:[<span style="color:#a6e22e">Resource</span>:<span style="color:#ae81ff">1219</span>]}
{industrial_building:[<span style="color:#a6e22e">Resource</span>:<span style="color:#ae81ff">1230</span>]}
</pre>
<p>You can then delete that temporary <code>_ready()</code> function.</p>
<p><em>Notice how as with every Singleton we show you, this one does not have mutable state. It loads the resources, then provides three functions to get access to them. Singletons that only return values on demand won’t cause severe bugs in your codebase.</em></p>
<!-- You can learn more about that with our best practices guide on singletons in Godot. You will find it in the Best Practices chapter. -->
<p>In the next lesson, we’ll start working on the scene player, which will sequence game events.</p>
<h2 id="code-reference">Code reference</h2>
<p>Here is the complete <code>Background.gd</code> script.</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#75715e">## Data container for backgrounds</span>
class_name Background
<span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Resource</span>

<span style="color:#66d9ef">export</span> <span style="color:#66d9ef">var</span> id :<span style="color:#f92672">=</span> <span style="color:#e6db74">&quot;background_id&quot;</span>
<span style="color:#66d9ef">export</span> <span style="color:#66d9ef">var</span> display_name :<span style="color:#f92672">=</span> <span style="color:#e6db74">&quot;Display Name&quot;</span>
<span style="color:#66d9ef">export</span> <span style="color:#66d9ef">var</span> texture: <span style="color:#a6e22e">Texture</span>
</pre>
<p>Here is <code>ResourceDB.gd</code>.</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Node</span>

<span style="color:#66d9ef">const</span> NARRATOR_ID :<span style="color:#f92672">=</span> <span style="color:#e6db74">&quot;narrator&quot;</span>

<span style="color:#66d9ef">onready</span> <span style="color:#66d9ef">var</span> _characters :<span style="color:#f92672">=</span> _load_resources(<span style="color:#e6db74">&quot;res://Characters/&quot;</span>, <span style="color:#e6db74">&quot;_is_character&quot;</span>)
<span style="color:#66d9ef">onready</span> <span style="color:#66d9ef">var</span> _backgrounds :<span style="color:#f92672">=</span> _load_resources(<span style="color:#e6db74">&quot;res://Backgrounds/&quot;</span>, <span style="color:#e6db74">&quot;_is_background&quot;</span>)


<span style="color:#66d9ef">func</span> get_character(character_id: <span style="color:#a6e22e">String</span>) <span style="color:#f92672">-&gt;</span> Character:
    <span style="color:#66d9ef">return</span> _characters<span style="color:#f92672">.</span>get(character_id)


<span style="color:#66d9ef">func</span> get_background(background_id: <span style="color:#a6e22e">String</span>) <span style="color:#f92672">-&gt;</span> Background:
    <span style="color:#66d9ef">return</span> _backgrounds<span style="color:#f92672">.</span>get(background_id)


<span style="color:#66d9ef">func</span> get_narrator() <span style="color:#f92672">-&gt;</span> Character:
    <span style="color:#66d9ef">return</span> _characters<span style="color:#f92672">.</span>get(NARRATOR_ID)


<span style="color:#66d9ef">func</span> _load_resources(directory_path: <span style="color:#a6e22e">String</span>, check_type_function: <span style="color:#a6e22e">String</span>) <span style="color:#f92672">-&gt;</span> <span style="color:#a6e22e">Dictionary</span>:
    <span style="color:#66d9ef">var</span> directory :<span style="color:#f92672">=</span> <span style="color:#a6e22e">Directory</span><span style="color:#f92672">.</span>new()
    <span style="color:#66d9ef">if</span> directory<span style="color:#f92672">.</span>open(directory_path) <span style="color:#f92672">!=</span> OK:
        <span style="color:#66d9ef">return</span> {}

    <span style="color:#66d9ef">var</span> resources :<span style="color:#f92672">=</span> {}

    directory<span style="color:#f92672">.</span>list_dir_begin()
    <span style="color:#66d9ef">var</span> filename <span style="color:#f92672">=</span> directory<span style="color:#f92672">.</span>get_next()
    <span style="color:#66d9ef">while</span> filename <span style="color:#f92672">!=</span> <span style="color:#e6db74">&quot;&quot;</span>:
        <span style="color:#66d9ef">if</span> filename<span style="color:#f92672">.</span>ends_with(<span style="color:#e6db74">&quot;.tres&quot;</span>):
            <span style="color:#66d9ef">var</span> resource: <span style="color:#a6e22e">Resource</span> <span style="color:#f92672">=</span> load(directory_path<span style="color:#f92672">.</span>plus_file(filename))

            <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> call(check_type_function, resource):
                <span style="color:#66d9ef">continue</span>

            resources[resource<span style="color:#f92672">.</span>id] <span style="color:#f92672">=</span> resource
        filename <span style="color:#f92672">=</span> directory<span style="color:#f92672">.</span>get_next()
    directory<span style="color:#f92672">.</span>list_dir_end()

    <span style="color:#66d9ef">return</span> resources


<span style="color:#66d9ef">func</span> _is_character(resource: <span style="color:#a6e22e">Resource</span>) <span style="color:#f92672">-&gt;</span> <span style="color:#a6e22e">bool</span>:
    <span style="color:#66d9ef">return</span> resource is Character


<span style="color:#66d9ef">func</span> _is_background(resource: <span style="color:#a6e22e">Resource</span>) <span style="color:#f92672">-&gt;</span> <span style="color:#a6e22e">bool</span>:
    <span style="color:#66d9ef">return</span> resource is Background
</pre>
</body>
</html>
